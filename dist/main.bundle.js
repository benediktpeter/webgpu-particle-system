(()=>{"use strict";var t={579:(t,e,n)=>{n.r(e),n.d(e,{default:()=>s});var r=n(15),i=n.n(r),a=n(645),o=n.n(a)()(i());o.push([t.id,"h1 {\r\n    font-family: sans-serif;\r\n}\r\n\r\n.fpsCounter {\r\n    font-family: sans-serif;\r\n}\r\n","",{version:3,sources:["webpack://./dist/site.css"],names:[],mappings:"AAAA;IACI,uBAAuB;AAC3B;;AAEA;IACI,uBAAuB;AAC3B",sourcesContent:["h1 {\r\n    font-family: sans-serif;\r\n}\r\n\r\n.fpsCounter {\r\n    font-family: sans-serif;\r\n}\r\n"],sourceRoot:""}]);const s=o},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(r)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(i[o]=!0)}for(var s=0;s<t.length;s++){var u=[].concat(t[s]);r&&i[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),e.push(u))}},e}},15:t=>{function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}t.exports=function(t){var n,r,i=(r=4,function(t){if(Array.isArray(t))return t}(n=t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);o=!0);}catch(t){s=!0,i=t}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(n,r)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[1],o=i[3];if(!o)return a;if("function"==typeof btoa){var s=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),u="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),l="/*# ".concat(u," */"),c=o.sources.map((function(t){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(t," */")}));return[a].concat(c).concat([l]).join("\n")}return[a].join("\n")}},376:(t,e,n)=>{function r(t,e){var n=t.__state.conversionName.toString(),r=Math.round(t.r),i=Math.round(t.g),a=Math.round(t.b),o=t.a,s=Math.round(t.h),u=t.s.toFixed(1),l=t.v.toFixed(1);if(e||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var c=t.hex.toString(16);c.length<6;)c="0"+c;return"#"+c}return"CSS_RGB"===n?"rgb("+r+","+i+","+a+")":"CSS_RGBA"===n?"rgba("+r+","+i+","+a+","+o+")":"HEX"===n?"0x"+t.hex.toString(16):"RGB_ARRAY"===n?"["+r+","+i+","+a+"]":"RGBA_ARRAY"===n?"["+r+","+i+","+a+","+o+"]":"RGB_OBJ"===n?"{r:"+r+",g:"+i+",b:"+a+"}":"RGBA_OBJ"===n?"{r:"+r+",g:"+i+",b:"+a+",a:"+o+"}":"HSV_OBJ"===n?"{h:"+s+",s:"+u+",v:"+l+"}":"HSVA_OBJ"===n?"{h:"+s+",s:"+u+",v:"+l+",a:"+o+"}":"unknown format"}n.r(e),n.d(e,{GUI:()=>mt,color:()=>ct,controllers:()=>ft,default:()=>pt,dom:()=>ht,gui:()=>dt});var i=Array.prototype.forEach,a=Array.prototype.slice,o={BREAK:{},extend:function(t){return this.each(a.call(arguments,1),(function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(n){this.isUndefined(e[n])||(t[n]=e[n])}.bind(this))}),this),t},defaults:function(t){return this.each(a.call(arguments,1),(function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(n){this.isUndefined(t[n])&&(t[n]=e[n])}.bind(this))}),this),t},compose:function(){var t=a.call(arguments);return function(){for(var e=a.call(arguments),n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},each:function(t,e,n){if(t)if(i&&t.forEach&&t.forEach===i)t.forEach(e,n);else if(t.length===t.length+0){var r,a=void 0;for(a=0,r=t.length;a<r;a++)if(a in t&&e.call(n,t[a],a)===this.BREAK)return}else for(var o in t)if(e.call(n,t[o],o)===this.BREAK)return},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var r=void 0;return function(){var i=this,a=arguments;function o(){r=null,n||t.apply(i,a)}var s=n||!r;clearTimeout(r),r=setTimeout(o,e),s&&t.apply(i,a)}},toArray:function(t){return t.toArray?t.toArray():a.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return isNaN(t)})),isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return!1===t||!0===t},isFunction:function(t){return t instanceof Function}},s=[{litmus:o.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString(),0)}},write:r},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString(),0)}},write:r},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:r},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:r}}},{litmus:o.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:o.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:o.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(o.isNumber(t.r)&&o.isNumber(t.g)&&o.isNumber(t.b)&&o.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(o.isNumber(t.r)&&o.isNumber(t.g)&&o.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(o.isNumber(t.h)&&o.isNumber(t.s)&&o.isNumber(t.v)&&o.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(o.isNumber(t.h)&&o.isNumber(t.s)&&o.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}],u=void 0,l=void 0,c=function(){l=!1;var t=arguments.length>1?o.toArray(arguments):arguments[0];return o.each(s,(function(e){if(e.litmus(t))return o.each(e.conversions,(function(e,n){if(u=e.read(t),!1===l&&!1!==u)return l=u,u.conversionName=n,u.conversion=e,o.BREAK})),o.BREAK})),l},f=void 0,h={hsv_to_rgb:function(t,e,n){var r=Math.floor(t/60)%6,i=t/60-Math.floor(t/60),a=n*(1-e),o=n*(1-i*e),s=n*(1-(1-i)*e),u=[[n,s,a],[o,n,a],[a,n,s],[a,o,n],[s,a,n],[n,a,o]][r];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(t,e,n){var r=Math.min(t,e,n),i=Math.max(t,e,n),a=i-r,o=void 0;return 0===i?{h:NaN,s:0,v:0}:(o=t===i?(e-n)/a:e===i?2+(n-t)/a:4+(t-e)/a,(o/=6)<0&&(o+=1),{h:360*o,s:a/i,v:i/255})},rgb_to_hex:function(t,e,n){var r=this.hex_with_component(0,2,t);return r=this.hex_with_component(r,1,e),this.hex_with_component(r,0,n)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(t,e,n){return n<<(f=8*e)|t&~(255<<f)}},d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),_=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0},v=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},g=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},b=function(){function t(){if(m(this,t),this.__state=c.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return p(t,[{key:"toString",value:function(){return r(this)}},{key:"toHexString",value:function(){return r(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),t}();function y(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space||b.recalculateRGB(this,e,n),this.__state[e]},set:function(t){"RGB"!==this.__state.space&&(b.recalculateRGB(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function M(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space||b.recalculateHSV(this),this.__state[e]},set:function(t){"HSV"!==this.__state.space&&(b.recalculateHSV(this),this.__state.space="HSV"),this.__state[e]=t}})}b.recalculateRGB=function(t,e,n){if("HEX"===t.__state.space)t.__state[e]=h.component_from_hex(t.__state.hex,n);else{if("HSV"!==t.__state.space)throw new Error("Corrupted color state");o.extend(t.__state,h.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}},b.recalculateHSV=function(t){var e=h.rgb_to_hsv(t.r,t.g,t.b);o.extend(t.__state,{s:e.s,v:e.v}),o.isNaN(e.h)?o.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=e.h},b.COMPONENTS=["r","g","b","h","s","v","hex","a"],y(b.prototype,"r",2),y(b.prototype,"g",1),y(b.prototype,"b",0),M(b.prototype,"h"),M(b.prototype,"s"),M(b.prototype,"v"),Object.defineProperty(b.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(b.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=h.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}});var x=function(){function t(e,n){m(this,t),this.initialValue=e[n],this.domElement=document.createElement("div"),this.object=e,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return p(t,[{key:"onChange",value:function(t){return this.__onChange=t,this}},{key:"onFinishChange",value:function(t){return this.__onFinishChange=t,this}},{key:"setValue",value:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),t}(),w={};o.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},(function(t,e){o.each(t,(function(t){w[t]=e}))}));var P=/(\d+(\.\d+)?)px/;function C(t){if("0"===t||o.isUndefined(t))return 0;var e=t.match(P);return o.isNull(e)?0:parseFloat(e[1])}var E={makeSelectable:function(t,e){void 0!==t&&void 0!==t.style&&(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(t,e,n){var r=n,i=e;o.isUndefined(i)&&(i=!0),o.isUndefined(r)&&(r=!0),t.style.position="absolute",i&&(t.style.left=0,t.style.right=0),r&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,e,n,r){var i=n||{},a=w[e];if(!a)throw new Error("Event type "+e+" not supported.");var s=document.createEvent(a);switch(a){case"MouseEvents":var u=i.x||i.clientX||0,l=i.y||i.clientY||0;s.initMouseEvent(e,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,u,l,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var c=s.initKeyboardEvent||s.initKeyEvent;o.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),c(e,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:s.initEvent(e,i.bubbles||!1,i.cancelable||!0)}o.defaults(s,r),t.dispatchEvent(s)},bind:function(t,e,n,r){var i=r||!1;return t.addEventListener?t.addEventListener(e,n,i):t.attachEvent&&t.attachEvent("on"+e,n),E},unbind:function(t,e,n,r){var i=r||!1;return t.removeEventListener?t.removeEventListener(e,n,i):t.detachEvent&&t.detachEvent("on"+e,n),E},addClass:function(t,e){if(void 0===t.className)t.className=e;else if(t.className!==e){var n=t.className.split(/ +/);-1===n.indexOf(e)&&(n.push(e),t.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return E},removeClass:function(t,e){if(e)if(t.className===e)t.removeAttribute("class");else{var n=t.className.split(/ +/),r=n.indexOf(e);-1!==r&&(n.splice(r,1),t.className=n.join(" "))}else t.className=void 0;return E},hasClass:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var e=getComputedStyle(t);return C(e["border-left-width"])+C(e["border-right-width"])+C(e["padding-left"])+C(e["padding-right"])+C(e.width)},getHeight:function(t){var e=getComputedStyle(t);return C(e["border-top-width"])+C(e["border-bottom-width"])+C(e["padding-top"])+C(e["padding-bottom"])+C(e.height)},getOffset:function(t){var e=t,n={left:0,top:0};if(e.offsetParent)do{n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent}while(e);return n},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}},S=function(t){function e(t,n){m(this,e);var r=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),i=r;return r.__prev=r.getValue(),r.__checkbox=document.createElement("input"),r.__checkbox.setAttribute("type","checkbox"),E.bind(r.__checkbox,"change",(function(){i.setValue(!i.__prev)}),!1),r.domElement.appendChild(r.__checkbox),r.updateDisplay(),r}return v(e,t),p(e,[{key:"setValue",value:function(t){var n=_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(x),A=function(t){function e(t,n,r){m(this,e);var i=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),a=r,s=i;if(i.__select=document.createElement("select"),o.isArray(a)){var u={};o.each(a,(function(t){u[t]=t})),a=u}return o.each(a,(function(t,e){var n=document.createElement("option");n.innerHTML=e,n.setAttribute("value",t),s.__select.appendChild(n)})),i.updateDisplay(),E.bind(i.__select,"change",(function(){var t=this.options[this.selectedIndex].value;s.setValue(t)})),i.domElement.appendChild(i.__select),i}return v(e,t),p(e,[{key:"setValue",value:function(t){var n=_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return E.isActive(this.__select)?this:(this.__select.value=this.getValue(),_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this))}}]),e}(x),O=function(t){function e(t,n){m(this,e);var r=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),i=r;function a(){i.setValue(i.__input.value)}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),E.bind(r.__input,"keyup",a),E.bind(r.__input,"change",a),E.bind(r.__input,"blur",(function(){i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())})),E.bind(r.__input,"keydown",(function(t){13===t.keyCode&&this.blur()})),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return v(e,t),p(e,[{key:"updateDisplay",value:function(){return E.isActive(this.__input)||(this.__input.value=this.getValue()),_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(x);function B(t){var e=t.toString();return e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}var T=function(t){function e(t,n,r){m(this,e);var i=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),a=r||{};return i.__min=a.min,i.__max=a.max,i.__step=a.step,o.isUndefined(i.__step)?0===i.initialValue?i.__impliedStep=1:i.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(i.initialValue))/Math.LN10))/10:i.__impliedStep=i.__step,i.__precision=B(i.__impliedStep),i}return v(e,t),p(e,[{key:"setValue",value:function(t){var n=t;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(t){return this.__min=t,this}},{key:"max",value:function(t){return this.__max=t,this}},{key:"step",value:function(t){return this.__step=t,this.__impliedStep=t,this.__precision=B(t),this}}]),e}(x),F=function(t){function e(t,n,r){m(this,e);var i=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r));i.__truncationSuspended=!1;var a=i,s=void 0;function u(){a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}function l(t){var e=s-t.clientY;a.setValue(a.getValue()+e*a.__impliedStep),s=t.clientY}function c(){E.unbind(window,"mousemove",l),E.unbind(window,"mouseup",c),u()}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),E.bind(i.__input,"change",(function(){var t=parseFloat(a.__input.value);o.isNaN(t)||a.setValue(t)})),E.bind(i.__input,"blur",(function(){u()})),E.bind(i.__input,"mousedown",(function(t){E.bind(window,"mousemove",l),E.bind(window,"mouseup",c),s=t.clientY})),E.bind(i.__input,"keydown",(function(t){13===t.keyCode&&(a.__truncationSuspended=!0,this.blur(),a.__truncationSuspended=!1,u())})),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return v(e,t),p(e,[{key:"updateDisplay",value:function(){var t,n,r;return this.__input.value=this.__truncationSuspended?this.getValue():(t=this.getValue(),n=this.__precision,r=Math.pow(10,n),Math.round(t*r)/r),_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(T);function U(t,e,n,r,i){return r+(t-e)/(n-e)*(i-r)}var k=function(t){function e(t,n,r,i,a){m(this,e);var o=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,{min:r,max:i,step:a})),s=o;function u(t){t.preventDefault();var e=s.__background.getBoundingClientRect();return s.setValue(U(t.clientX,e.left,e.right,s.__min,s.__max)),!1}function l(){E.unbind(window,"mousemove",u),E.unbind(window,"mouseup",l),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function c(t){var e=t.touches[0].clientX,n=s.__background.getBoundingClientRect();s.setValue(U(e,n.left,n.right,s.__min,s.__max))}function f(){E.unbind(window,"touchmove",c),E.unbind(window,"touchend",f),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}return o.__background=document.createElement("div"),o.__foreground=document.createElement("div"),E.bind(o.__background,"mousedown",(function(t){document.activeElement.blur(),E.bind(window,"mousemove",u),E.bind(window,"mouseup",l),u(t)})),E.bind(o.__background,"touchstart",(function(t){1===t.touches.length&&(E.bind(window,"touchmove",c),E.bind(window,"touchend",f),c(t))})),E.addClass(o.__background,"slider"),E.addClass(o.__foreground,"slider-fg"),o.updateDisplay(),o.__background.appendChild(o.__foreground),o.domElement.appendChild(o.__background),o}return v(e,t),p(e,[{key:"updateDisplay",value:function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(T),L=function(t){function e(t,n,r){m(this,e);var i=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),a=i;return i.__button=document.createElement("div"),i.__button.innerHTML=void 0===r?"Fire":r,E.bind(i.__button,"click",(function(t){return t.preventDefault(),a.fire(),!1})),E.addClass(i.__button,"button"),i.domElement.appendChild(i.__button),i}return v(e,t),p(e,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),e}(x),R=function(t){function e(t,n){m(this,e);var r=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));r.__color=new b(r.getValue()),r.__temp=new b(0);var i=r;r.domElement=document.createElement("div"),E.makeSelectable(r.domElement,!1),r.__selector=document.createElement("div"),r.__selector.className="selector",r.__saturation_field=document.createElement("div"),r.__saturation_field.className="saturation-field",r.__field_knob=document.createElement("div"),r.__field_knob.className="field-knob",r.__field_knob_border="2px solid ",r.__hue_knob=document.createElement("div"),r.__hue_knob.className="hue-knob",r.__hue_field=document.createElement("div"),r.__hue_field.className="hue-field",r.__input=document.createElement("input"),r.__input.type="text",r.__input_textShadow="0 1px 1px ",E.bind(r.__input,"keydown",(function(t){13===t.keyCode&&d.call(this)})),E.bind(r.__input,"blur",d),E.bind(r.__selector,"mousedown",(function(){E.addClass(this,"drag").bind(window,"mouseup",(function(){E.removeClass(i.__selector,"drag")}))})),E.bind(r.__selector,"touchstart",(function(){E.addClass(this,"drag").bind(window,"touchend",(function(){E.removeClass(i.__selector,"drag")}))}));var a,s=document.createElement("div");function u(t){_(t),E.bind(window,"mousemove",_),E.bind(window,"touchmove",_),E.bind(window,"mouseup",f),E.bind(window,"touchend",f)}function l(t){v(t),E.bind(window,"mousemove",v),E.bind(window,"touchmove",v),E.bind(window,"mouseup",h),E.bind(window,"touchend",h)}function f(){E.unbind(window,"mousemove",_),E.unbind(window,"touchmove",_),E.unbind(window,"mouseup",f),E.unbind(window,"touchend",f),p()}function h(){E.unbind(window,"mousemove",v),E.unbind(window,"touchmove",v),E.unbind(window,"mouseup",h),E.unbind(window,"touchend",h),p()}function d(){var t=c(this.value);!1!==t?(i.__color.__state=t,i.setValue(i.__color.toOriginal())):this.value=i.__color.toString()}function p(){i.__onFinishChange&&i.__onFinishChange.call(i,i.__color.toOriginal())}function _(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=i.__saturation_field.getBoundingClientRect(),n=t.touches&&t.touches[0]||t,r=n.clientX,a=n.clientY,o=(r-e.left)/(e.right-e.left),s=1-(a-e.top)/(e.bottom-e.top);return s>1?s=1:s<0&&(s=0),o>1?o=1:o<0&&(o=0),i.__color.v=s,i.__color.s=o,i.setValue(i.__color.toOriginal()),!1}function v(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=i.__hue_field.getBoundingClientRect(),n=1-((t.touches&&t.touches[0]||t).clientY-e.top)/(e.bottom-e.top);return n>1?n=1:n<0&&(n=0),i.__color.h=360*n,i.setValue(i.__color.toOriginal()),!1}return o.extend(r.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),o.extend(r.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:r.__field_knob_border+(r.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),o.extend(r.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),o.extend(r.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),o.extend(s.style,{width:"100%",height:"100%",background:"none"}),V(s,"top","rgba(0,0,0,0)","#000"),o.extend(r.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),(a=r.__hue_field).style.background="",a.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",a.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.extend(r.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:r.__input_textShadow+"rgba(0,0,0,0.7)"}),E.bind(r.__saturation_field,"mousedown",u),E.bind(r.__saturation_field,"touchstart",u),E.bind(r.__field_knob,"mousedown",u),E.bind(r.__field_knob,"touchstart",u),E.bind(r.__hue_field,"mousedown",l),E.bind(r.__hue_field,"touchstart",l),r.__saturation_field.appendChild(s),r.__selector.appendChild(r.__field_knob),r.__selector.appendChild(r.__saturation_field),r.__selector.appendChild(r.__hue_field),r.__hue_field.appendChild(r.__hue_knob),r.domElement.appendChild(r.__input),r.domElement.appendChild(r.__selector),r.updateDisplay(),r}return v(e,t),p(e,[{key:"updateDisplay",value:function(){var t=c(this.getValue());if(!1!==t){var e=!1;o.each(b.COMPONENTS,(function(n){if(!o.isUndefined(t[n])&&!o.isUndefined(this.__color.__state[n])&&t[n]!==this.__color.__state[n])return e=!0,{}}),this),e&&o.extend(this.__color.__state,t)}o.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,r=255-n;o.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,V(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),o.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+r+","+r+","+r+",.7)"})}}]),e}(x),I=["-moz-","-o-","-webkit-","-ms-",""];function V(t,e,n,r){t.style.background="",o.each(I,(function(i){t.style.cssText+="background: "+i+"linear-gradient("+e+", "+n+" 0%, "+r+" 100%); "}))}var D='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',N=function(t,e){var n=t[e];return o.isArray(arguments[2])||o.isObject(arguments[2])?new A(t,e,arguments[2]):o.isNumber(n)?o.isNumber(arguments[2])&&o.isNumber(arguments[3])?o.isNumber(arguments[4])?new k(t,e,arguments[2],arguments[3],arguments[4]):new k(t,e,arguments[2],arguments[3]):o.isNumber(arguments[4])?new F(t,e,{min:arguments[2],max:arguments[3],step:arguments[4]}):new F(t,e,{min:arguments[2],max:arguments[3]}):o.isString(n)?new O(t,e):o.isFunction(n)?new L(t,e,""):o.isBoolean(n)?new S(t,e):null},G=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)},H=function(){function t(){m(this,t),this.backgroundElement=document.createElement("div"),o.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),E.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),o.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;E.bind(this.backgroundElement,"click",(function(){e.hide()}))}return p(t,[{key:"show",value:function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),o.defer((function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"}))}},{key:"hide",value:function(){var t=this,e=function e(){t.domElement.style.display="none",t.backgroundElement.style.display="none",E.unbind(t.domElement,"webkitTransitionEnd",e),E.unbind(t.domElement,"transitionend",e),E.unbind(t.domElement,"oTransitionEnd",e)};E.bind(this.domElement,"webkitTransitionEnd",e),E.bind(this.domElement,"transitionend",e),E.bind(this.domElement,"oTransitionEnd",e),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-E.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-E.getHeight(this.domElement)/2+"px"}}]),t}();!function(t,e){var n=e||document,r=document.createElement("style");r.type="text/css",r.innerHTML=t;var i=n.getElementsByTagName("head")[0];try{i.appendChild(r)}catch(t){}}(function(t){if("undefined"!=typeof window){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.innerHTML=t,document.head.appendChild(e),t}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .cr.function .property-name{width:100%}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));var z="Default",q=function(){try{return!!window.localStorage}catch(t){return!1}}(),j=void 0,W=!0,X=void 0,Y=!1,Q=[],Z=function t(e){var n=this,r=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),E.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],r=o.defaults(r,{closeOnTop:!1,autoPlace:!0,width:t.DEFAULT_WIDTH}),r=o.defaults(r,{resizable:r.autoPlace,hideable:r.autoPlace}),o.isUndefined(r.load)?r.load={preset:z}:r.preset&&(r.load.preset=r.preset),o.isUndefined(r.parent)&&r.hideable&&Q.push(this),r.resizable=o.isUndefined(r.parent)&&r.resizable,r.autoPlace&&o.isUndefined(r.scrollable)&&(r.scrollable=!0);var i,a=q&&"true"===localStorage.getItem(nt(0,"isLocal")),s=void 0,u=void 0;if(Object.defineProperties(this,{parent:{get:function(){return r.parent}},scrollable:{get:function(){return r.scrollable}},autoPlace:{get:function(){return r.autoPlace}},closeOnTop:{get:function(){return r.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:r.load.preset},set:function(t){n.parent?n.getRoot().preset=t:r.load.preset=t,function(t){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].value===t.preset&&(t.__preset_select.selectedIndex=e)}(this),n.revert()}},width:{get:function(){return r.width},set:function(t){r.width=t,st(n,t)}},name:{get:function(){return r.name},set:function(t){r.name=t,u&&(u.innerHTML=r.name)}},closed:{get:function(){return r.closed},set:function(e){r.closed=e,r.closed?E.addClass(n.__ul,t.CLASS_CLOSED):E.removeClass(n.__ul,t.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=e?t.TEXT_OPEN:t.TEXT_CLOSED)}},load:{get:function(){return r.load}},useLocalStorage:{get:function(){return a},set:function(t){q&&(a=t,t?E.bind(window,"unload",s):E.unbind(window,"unload",s),localStorage.setItem(nt(0,"isLocal"),t))}}}),o.isUndefined(r.parent)){if(this.closed=r.closed||!1,E.addClass(this.domElement,t.CLASS_MAIN),E.makeSelectable(this.domElement,!1),q&&a){n.useLocalStorage=!0;var l=localStorage.getItem(nt(0,"gui"));l&&(r.load=JSON.parse(l))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=t.TEXT_CLOSED,E.addClass(this.__closeButton,t.CLASS_CLOSE_BUTTON),r.closeOnTop?(E.addClass(this.__closeButton,t.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(E.addClass(this.__closeButton,t.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),E.bind(this.__closeButton,"click",(function(){n.closed=!n.closed}))}else{void 0===r.closed&&(r.closed=!0);var c=document.createTextNode(r.name);E.addClass(c,"controller-name"),u=K(n,c),E.addClass(this.__ul,t.CLASS_CLOSED),E.addClass(u,"title"),E.bind(u,"click",(function(t){return t.preventDefault(),n.closed=!n.closed,!1})),r.closed||(this.closed=!1)}r.autoPlace&&(o.isUndefined(r.parent)&&(W&&(X=document.createElement("div"),E.addClass(X,"dg"),E.addClass(X,t.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(X),W=!1),X.appendChild(this.domElement),E.addClass(this.domElement,t.CLASS_AUTO_PLACE)),this.parent||st(n,r.width)),this.__resizeHandler=function(){n.onResizeDebounced()},E.bind(window,"resize",this.__resizeHandler),E.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),E.bind(this.__ul,"transitionend",this.__resizeHandler),E.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),r.resizable&&ot(this),s=function(){q&&"true"===localStorage.getItem(nt(0,"isLocal"))&&localStorage.setItem(nt(0,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=s,r.parent||((i=n.getRoot()).width+=1,o.defer((function(){i.width-=1})))};function K(t,e,n){var r=document.createElement("li");return e&&r.appendChild(e),n?t.__ul.insertBefore(r,n):t.__ul.appendChild(r),t.onResize(),r}function J(t){E.unbind(window,"resize",t.__resizeHandler),t.saveToLocalStorageIfPossible&&E.unbind(window,"unload",t.saveToLocalStorageIfPossible)}function $(t,e){var n=t.__preset_select[t.__preset_select.selectedIndex];n.innerHTML=e?n.value+"*":n.value}function tt(t,e){var n=t.getRoot(),r=n.__rememberedObjects.indexOf(e.object);if(-1!==r){var i=n.__rememberedObjectIndecesToControllers[r];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[r]=i),i[e.property]=e,n.load&&n.load.remembered){var a=n.load.remembered,o=void 0;if(a[t.preset])o=a[t.preset];else{if(!a.Default)return;o=a.Default}if(o[r]&&void 0!==o[r][e.property]){var s=o[r][e.property];e.initialValue=s,e.setValue(s)}}}}function et(t,e,n,r){if(void 0===e[n])throw new Error('Object "'+e+'" has no property "'+n+'"');var i=void 0;if(r.color)i=new R(e,n);else{var a=[e,n].concat(r.factoryArgs);i=N.apply(t,a)}r.before instanceof x&&(r.before=r.before.__li),tt(t,i),E.addClass(i.domElement,"c");var s=document.createElement("span");E.addClass(s,"property-name"),s.innerHTML=i.property;var u=document.createElement("div");u.appendChild(s),u.appendChild(i.domElement);var l=K(t,u,r.before);return E.addClass(l,Z.CLASS_CONTROLLER_ROW),i instanceof R?E.addClass(l,"color"):E.addClass(l,d(i.getValue())),function(t,e,n){if(n.__li=e,n.__gui=t,o.extend(n,{options:function(e){if(arguments.length>1){var r=n.__li.nextElementSibling;return n.remove(),et(t,n.object,n.property,{before:r,factoryArgs:[o.toArray(arguments)]})}if(o.isArray(e)||o.isObject(e)){var i=n.__li.nextElementSibling;return n.remove(),et(t,n.object,n.property,{before:i,factoryArgs:[e]})}},name:function(t){return n.__li.firstElementChild.firstElementChild.innerHTML=t,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof k){var r=new F(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});o.each(["updateDisplay","onChange","onFinishChange","step","min","max"],(function(t){var e=n[t],i=r[t];n[t]=r[t]=function(){var t=Array.prototype.slice.call(arguments);return i.apply(r,t),e.apply(n,t)}})),E.addClass(e,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof F){var i=function(e){if(o.isNumber(n.__min)&&o.isNumber(n.__max)){var r=n.__li.firstElementChild.firstElementChild.innerHTML,i=n.__gui.__listening.indexOf(n)>-1;n.remove();var a=et(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return a.name(r),i&&a.listen(),a}return e};n.min=o.compose(i,n.min),n.max=o.compose(i,n.max)}else n instanceof S?(E.bind(e,"click",(function(){E.fakeEvent(n.__checkbox,"click")})),E.bind(n.__checkbox,"click",(function(t){t.stopPropagation()}))):n instanceof L?(E.bind(e,"click",(function(){E.fakeEvent(n.__button,"click")})),E.bind(e,"mouseover",(function(){E.addClass(n.__button,"hover")})),E.bind(e,"mouseout",(function(){E.removeClass(n.__button,"hover")}))):n instanceof R&&(E.addClass(e,"color"),n.updateDisplay=o.compose((function(t){return e.style.borderLeftColor=n.__color.toString(),t}),n.updateDisplay),n.updateDisplay());n.setValue=o.compose((function(e){return t.getRoot().__preset_select&&n.isModified()&&$(t.getRoot(),!0),e}),n.setValue)}(t,l,i),t.__controllers.push(i),i}function nt(t,e){return document.location.href+"."+e}function rt(t,e,n){var r=document.createElement("option");r.innerHTML=e,r.value=e,t.__preset_select.appendChild(r),n&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function it(t,e){e.style.display=t.useLocalStorage?"block":"none"}function at(t){var e=t.__save_row=document.createElement("li");E.addClass(t.domElement,"has-save"),t.__ul.insertBefore(e,t.__ul.firstChild),E.addClass(e,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",E.addClass(n,"button gears");var r=document.createElement("span");r.innerHTML="Save",E.addClass(r,"button"),E.addClass(r,"save");var i=document.createElement("span");i.innerHTML="New",E.addClass(i,"button"),E.addClass(i,"save-as");var a=document.createElement("span");a.innerHTML="Revert",E.addClass(a,"button"),E.addClass(a,"revert");var s=t.__preset_select=document.createElement("select");if(t.load&&t.load.remembered?o.each(t.load.remembered,(function(e,n){rt(t,n,n===t.preset)})):rt(t,z,!1),E.bind(s,"change",(function(){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].innerHTML=t.__preset_select[e].value;t.preset=this.value})),e.appendChild(s),e.appendChild(n),e.appendChild(r),e.appendChild(i),e.appendChild(a),q){var u=document.getElementById("dg-local-explain"),l=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(nt(0,"isLocal"))&&l.setAttribute("checked","checked"),it(t,u),E.bind(l,"change",(function(){t.useLocalStorage=!t.useLocalStorage,it(t,u)}))}var c=document.getElementById("dg-new-constructor");E.bind(c,"keydown",(function(t){!t.metaKey||67!==t.which&&67!==t.keyCode||j.hide()})),E.bind(n,"click",(function(){c.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),j.show(),c.focus(),c.select()})),E.bind(r,"click",(function(){t.save()})),E.bind(i,"click",(function(){var e=prompt("Enter a new preset name.");e&&t.saveAs(e)})),E.bind(a,"click",(function(){t.revert()}))}function ot(t){var e=void 0;function n(n){return n.preventDefault(),t.width+=e-n.clientX,t.onResize(),e=n.clientX,!1}function r(){E.removeClass(t.__closeButton,Z.CLASS_DRAG),E.unbind(window,"mousemove",n),E.unbind(window,"mouseup",r)}function i(i){return i.preventDefault(),e=i.clientX,E.addClass(t.__closeButton,Z.CLASS_DRAG),E.bind(window,"mousemove",n),E.bind(window,"mouseup",r),!1}t.__resize_handle=document.createElement("div"),o.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),E.bind(t.__resize_handle,"mousedown",i),E.bind(t.__closeButton,"mousedown",i),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}function st(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function ut(t,e){var n={};return o.each(t.__rememberedObjects,(function(r,i){var a={},s=t.__rememberedObjectIndecesToControllers[i];o.each(s,(function(t,n){a[n]=e?t.initialValue:t.getValue()})),n[i]=a})),n}function lt(t){0!==t.length&&G.call(window,(function(){lt(t)})),o.each(t,(function(t){t.updateDisplay()}))}Z.toggleHide=function(){Y=!Y,o.each(Q,(function(t){t.domElement.style.display=Y?"none":""}))},Z.CLASS_AUTO_PLACE="a",Z.CLASS_AUTO_PLACE_CONTAINER="ac",Z.CLASS_MAIN="main",Z.CLASS_CONTROLLER_ROW="cr",Z.CLASS_TOO_TALL="taller-than-window",Z.CLASS_CLOSED="closed",Z.CLASS_CLOSE_BUTTON="close-button",Z.CLASS_CLOSE_TOP="close-top",Z.CLASS_CLOSE_BOTTOM="close-bottom",Z.CLASS_DRAG="drag",Z.DEFAULT_WIDTH=245,Z.TEXT_CLOSED="Close Controls",Z.TEXT_OPEN="Open Controls",Z._keydownHandler=function(t){"text"===document.activeElement.type||72!==t.which&&72!==t.keyCode||Z.toggleHide()},E.bind(window,"keydown",Z._keydownHandler,!1),o.extend(Z.prototype,{add:function(t,e){return et(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return et(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.splice(this.__controllers.indexOf(t),1);var e=this;o.defer((function(){e.onResize()}))},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&X.removeChild(this.domElement);var t=this;o.each(this.__folders,(function(e){t.removeFolder(e)})),E.unbind(window,"keydown",Z._keydownHandler,!1),J(this)},addFolder:function(t){if(void 0!==this.__folders[t])throw new Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var n=new Z(e);this.__folders[t]=n;var r=K(this,n.domElement);return E.addClass(r,"folder"),n},removeFolder:function(t){this.__ul.removeChild(t.domElement.parentElement),delete this.__folders[t.name],this.load&&this.load.folders&&this.load.folders[t.name]&&delete this.load.folders[t.name],J(t);var e=this;o.each(t.__folders,(function(e){t.removeFolder(e)})),o.defer((function(){e.onResize()}))},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=E.getOffset(t.__ul).top,n=0;o.each(t.__ul.childNodes,(function(e){t.autoPlace&&e===t.__save_row||(n+=E.getHeight(e))})),window.innerHeight-e-20<n?(E.addClass(t.domElement,Z.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-20+"px"):(E.removeClass(t.domElement,Z.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&o.defer((function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"})),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},onResizeDebounced:o.debounce((function(){this.onResize()}),50),remember:function(){if(o.isUndefined(j)&&((j=new H).domElement.innerHTML=D),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;o.each(Array.prototype.slice.call(arguments),(function(e){0===t.__rememberedObjects.length&&at(t),-1===t.__rememberedObjects.indexOf(e)&&t.__rememberedObjects.push(e)})),this.autoPlace&&st(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=ut(this)),t.folders={},o.each(this.__folders,(function(e,n){t.folders[n]=e.getSaveObject()})),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=ut(this),$(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered.Default=ut(this,!0)),this.load.remembered[t]=ut(this),this.preset=t,rt(this,t,!0),this.saveToLocalStorageIfPossible()},revert:function(t){o.each(this.__controllers,(function(e){this.getRoot().load.remembered?tt(t||this.getRoot(),e):e.setValue(e.initialValue),e.__onFinishChange&&e.__onFinishChange.call(e,e.getValue())}),this),o.each(this.__folders,(function(t){t.revert(t)})),t||$(this.getRoot(),!1)},listen:function(t){var e=0===this.__listening.length;this.__listening.push(t),e&&lt(this.__listening)},updateDisplay:function(){o.each(this.__controllers,(function(t){t.updateDisplay()})),o.each(this.__folders,(function(t){t.updateDisplay()}))}});var ct={Color:b,math:h,interpret:c},ft={Controller:x,BooleanController:S,OptionController:A,StringController:O,NumberController:T,NumberControllerBox:F,NumberControllerSlider:k,FunctionController:L,ColorController:R},ht={dom:E},dt={GUI:Z},mt=Z;const pt={color:ct,controllers:ft,dom:ht,gui:dt,GUI:Z}},887:(t,e,n)=>{n.r(e),n.d(e,{glMatrix:()=>r,mat2:()=>i,mat2d:()=>a,mat3:()=>o,mat4:()=>s,quat:()=>c,quat2:()=>f,vec2:()=>h,vec3:()=>u,vec4:()=>l});var r={};n.r(r),n.d(r,{ARRAY_TYPE:()=>m,EPSILON:()=>d,RANDOM:()=>p,equals:()=>b,setMatrixArrayType:()=>_,toRadian:()=>g});var i={};n.r(i),n.d(i,{LDU:()=>I,add:()=>V,adjoint:()=>A,clone:()=>M,copy:()=>x,create:()=>y,determinant:()=>O,equals:()=>G,exactEquals:()=>N,frob:()=>R,fromRotation:()=>U,fromScaling:()=>k,fromValues:()=>P,identity:()=>w,invert:()=>S,mul:()=>q,multiply:()=>B,multiplyScalar:()=>H,multiplyScalarAndAdd:()=>z,rotate:()=>T,scale:()=>F,set:()=>C,str:()=>L,sub:()=>j,subtract:()=>D,transpose:()=>E});var a={};n.r(a),n.d(a,{add:()=>lt,clone:()=>X,copy:()=>Y,create:()=>W,determinant:()=>$,equals:()=>mt,exactEquals:()=>dt,frob:()=>ut,fromRotation:()=>it,fromScaling:()=>at,fromTranslation:()=>ot,fromValues:()=>Z,identity:()=>Q,invert:()=>J,mul:()=>pt,multiply:()=>tt,multiplyScalar:()=>ft,multiplyScalarAndAdd:()=>ht,rotate:()=>et,scale:()=>nt,set:()=>K,str:()=>st,sub:()=>_t,subtract:()=>ct,translate:()=>rt});var o={};n.r(o),n.d(o,{add:()=>Gt,adjoint:()=>Et,clone:()=>bt,copy:()=>yt,create:()=>vt,determinant:()=>St,equals:()=>Wt,exactEquals:()=>jt,frob:()=>Nt,fromMat2d:()=>Lt,fromMat4:()=>gt,fromQuat:()=>Rt,fromRotation:()=>Ut,fromScaling:()=>kt,fromTranslation:()=>Ft,fromValues:()=>Mt,identity:()=>wt,invert:()=>Ct,mul:()=>Xt,multiply:()=>At,multiplyScalar:()=>zt,multiplyScalarAndAdd:()=>qt,normalFromMat4:()=>It,projection:()=>Vt,rotate:()=>Bt,scale:()=>Tt,set:()=>xt,str:()=>Dt,sub:()=>Yt,subtract:()=>Ht,translate:()=>Ot,transpose:()=>Pt});var s={};n.r(s),n.d(s,{add:()=>Ve,adjoint:()=>re,clone:()=>Zt,copy:()=>Kt,create:()=>Qt,determinant:()=>ie,equals:()=>ze,exactEquals:()=>He,frob:()=>Ie,fromQuat:()=>Ce,fromQuat2:()=>be,fromRotation:()=>me,fromRotationTranslation:()=>ge,fromRotationTranslationScale:()=>we,fromRotationTranslationScaleOrigin:()=>Pe,fromScaling:()=>de,fromTranslation:()=>he,fromValues:()=>Jt,fromXRotation:()=>pe,fromYRotation:()=>_e,fromZRotation:()=>ve,frustum:()=>Ee,getRotation:()=>xe,getScaling:()=>Me,getTranslation:()=>ye,identity:()=>te,invert:()=>ne,lookAt:()=>ke,mul:()=>qe,multiply:()=>ae,multiplyScalar:()=>Ne,multiplyScalarAndAdd:()=>Ge,ortho:()=>Fe,orthoNO:()=>Te,orthoZO:()=>Ue,perspective:()=>Ae,perspectiveFromFieldOfView:()=>Be,perspectiveNO:()=>Se,perspectiveZO:()=>Oe,rotate:()=>ue,rotateX:()=>le,rotateY:()=>ce,rotateZ:()=>fe,scale:()=>se,set:()=>$t,str:()=>Re,sub:()=>je,subtract:()=>De,targetTo:()=>Le,translate:()=>oe,transpose:()=>ee});var u={};n.r(u),n.d(u,{add:()=>Je,angle:()=>An,bezier:()=>yn,ceil:()=>nn,clone:()=>Xe,copy:()=>Ze,create:()=>We,cross:()=>vn,dist:()=>In,distance:()=>cn,div:()=>Rn,divide:()=>en,dot:()=>_n,equals:()=>Fn,exactEquals:()=>Tn,floor:()=>rn,forEach:()=>Gn,fromValues:()=>Qe,hermite:()=>bn,inverse:()=>mn,len:()=>Dn,length:()=>Ye,lerp:()=>gn,max:()=>on,min:()=>an,mul:()=>Ln,multiply:()=>tn,negate:()=>dn,normalize:()=>pn,random:()=>Mn,rotateX:()=>Cn,rotateY:()=>En,rotateZ:()=>Sn,round:()=>sn,scale:()=>un,scaleAndAdd:()=>ln,set:()=>Ke,sqrDist:()=>Vn,sqrLen:()=>Nn,squaredDistance:()=>fn,squaredLength:()=>hn,str:()=>Bn,sub:()=>kn,subtract:()=>$e,transformMat3:()=>wn,transformMat4:()=>xn,transformQuat:()=>Pn,zero:()=>On});var l={};n.r(l),n.d(l,{add:()=>Xn,ceil:()=>Kn,clone:()=>zn,copy:()=>jn,create:()=>Hn,cross:()=>hr,dist:()=>Pr,distance:()=>ir,div:()=>wr,divide:()=>Zn,dot:()=>fr,equals:()=>yr,exactEquals:()=>br,floor:()=>Jn,forEach:()=>Ar,fromValues:()=>qn,inverse:()=>lr,len:()=>Er,length:()=>or,lerp:()=>dr,max:()=>tr,min:()=>$n,mul:()=>xr,multiply:()=>Qn,negate:()=>ur,normalize:()=>cr,random:()=>mr,round:()=>er,scale:()=>nr,scaleAndAdd:()=>rr,set:()=>Wn,sqrDist:()=>Cr,sqrLen:()=>Sr,squaredDistance:()=>ar,squaredLength:()=>sr,str:()=>gr,sub:()=>Mr,subtract:()=>Yn,transformMat4:()=>pr,transformQuat:()=>_r,zero:()=>vr});var c={};n.r(c),n.d(c,{add:()=>ai,calculateW:()=>Vr,clone:()=>ei,conjugate:()=>jr,copy:()=>ri,create:()=>Or,dot:()=>ui,equals:()=>_i,exactEquals:()=>pi,exp:()=>Dr,fromEuler:()=>Xr,fromMat3:()=>Wr,fromValues:()=>ni,getAngle:()=>Ur,getAxisAngle:()=>Fr,identity:()=>Br,invert:()=>qr,len:()=>fi,length:()=>ci,lerp:()=>li,ln:()=>Nr,mul:()=>oi,multiply:()=>kr,normalize:()=>mi,pow:()=>Gr,random:()=>zr,rotateX:()=>Lr,rotateY:()=>Rr,rotateZ:()=>Ir,rotationTo:()=>vi,scale:()=>si,set:()=>ii,setAxes:()=>bi,setAxisAngle:()=>Tr,slerp:()=>Hr,sqlerp:()=>gi,sqrLen:()=>di,squaredLength:()=>hi,str:()=>Yr});var f={};n.r(f),n.d(f,{add:()=>zi,clone:()=>Mi,conjugate:()=>Zi,copy:()=>Ai,create:()=>yi,dot:()=>Xi,equals:()=>ia,exactEquals:()=>ra,fromMat4:()=>Si,fromRotation:()=>Ei,fromRotationTranslation:()=>Pi,fromRotationTranslationValues:()=>wi,fromTranslation:()=>Ci,fromValues:()=>xi,getDual:()=>Fi,getReal:()=>Ti,getTranslation:()=>Li,identity:()=>Oi,invert:()=>Qi,len:()=>Ji,length:()=>Ki,lerp:()=>Yi,mul:()=>ji,multiply:()=>qi,normalize:()=>ea,rotateAroundAxis:()=>Hi,rotateByQuatAppend:()=>Ni,rotateByQuatPrepend:()=>Gi,rotateX:()=>Ii,rotateY:()=>Vi,rotateZ:()=>Di,scale:()=>Wi,set:()=>Bi,setDual:()=>ki,setReal:()=>Ui,sqrLen:()=>ta,squaredLength:()=>$i,str:()=>na,translate:()=>Ri});var h={};n.r(h),n.d(h,{add:()=>ca,angle:()=>Ia,ceil:()=>ma,clone:()=>oa,copy:()=>ua,create:()=>aa,cross:()=>Oa,dist:()=>Wa,distance:()=>Ma,div:()=>ja,divide:()=>da,dot:()=>Aa,equals:()=>Ga,exactEquals:()=>Na,floor:()=>pa,forEach:()=>Qa,fromValues:()=>sa,inverse:()=>Ea,len:()=>Ha,length:()=>wa,lerp:()=>Ba,max:()=>va,min:()=>_a,mul:()=>qa,multiply:()=>ha,negate:()=>Ca,normalize:()=>Sa,random:()=>Ta,rotate:()=>Ra,round:()=>ga,scale:()=>ba,scaleAndAdd:()=>ya,set:()=>la,sqrDist:()=>Xa,sqrLen:()=>Ya,squaredDistance:()=>xa,squaredLength:()=>Pa,str:()=>Da,sub:()=>za,subtract:()=>fa,transformMat2:()=>Fa,transformMat2d:()=>Ua,transformMat3:()=>ka,transformMat4:()=>La,zero:()=>Va});var d=1e-6,m="undefined"!=typeof Float32Array?Float32Array:Array,p=Math.random;function _(t){m=t}var v=Math.PI/180;function g(t){return t*v}function b(t,e){return Math.abs(t-e)<=d*Math.max(1,Math.abs(t),Math.abs(e))}function y(){var t=new m(4);return m!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function M(t){var e=new m(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function x(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function w(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function P(t,e,n,r){var i=new m(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function C(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function E(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function S(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n*a-i*r;return o?(o=1/o,t[0]=a*o,t[1]=-r*o,t[2]=-i*o,t[3]=n*o,t):null}function A(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function O(t){return t[0]*t[3]-t[2]*t[1]}function B(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=n[0],u=n[1],l=n[2],c=n[3];return t[0]=r*s+a*u,t[1]=i*s+o*u,t[2]=r*l+a*c,t[3]=i*l+o*c,t}function T(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*s,t[1]=i*u+o*s,t[2]=r*-s+a*u,t[3]=i*-s+o*u,t}function F(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=n[0],u=n[1];return t[0]=r*s,t[1]=i*s,t[2]=a*u,t[3]=o*u,t}function U(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t}function k(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function L(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function R(t){return Math.hypot(t[0],t[1],t[2],t[3])}function I(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]}function V(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function D(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function N(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function G(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=e[0],s=e[1],u=e[2],l=e[3];return Math.abs(n-o)<=d*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-s)<=d*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=d*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-l)<=d*Math.max(1,Math.abs(a),Math.abs(l))}function H(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function z(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var q=B,j=D;function W(){var t=new m(6);return m!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function X(t){var e=new m(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Y(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Q(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function Z(t,e,n,r,i,a){var o=new m(6);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o[4]=i,o[5]=a,o}function K(t,e,n,r,i,a,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t}function J(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=n*a-r*i;return u?(u=1/u,t[0]=a*u,t[1]=-r*u,t[2]=-i*u,t[3]=n*u,t[4]=(i*s-a*o)*u,t[5]=(r*o-n*s)*u,t):null}function $(t){return t[0]*t[3]-t[1]*t[2]}function tt(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=n[0],c=n[1],f=n[2],h=n[3],d=n[4],m=n[5];return t[0]=r*l+a*c,t[1]=i*l+o*c,t[2]=r*f+a*h,t[3]=i*f+o*h,t[4]=r*d+a*m+s,t[5]=i*d+o*m+u,t}function et(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=Math.sin(n),c=Math.cos(n);return t[0]=r*c+a*l,t[1]=i*c+o*l,t[2]=r*-l+a*c,t[3]=i*-l+o*c,t[4]=s,t[5]=u,t}function nt(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=n[0],c=n[1];return t[0]=r*l,t[1]=i*l,t[2]=a*c,t[3]=o*c,t[4]=s,t[5]=u,t}function rt(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=n[0],c=n[1];return t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=r*l+a*c+s,t[5]=i*l+o*c+u,t}function it(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t}function at(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function ot(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function st(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function ut(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function lt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function ct(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function ft(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function ht(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t}function dt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function mt(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=e[0],l=e[1],c=e[2],f=e[3],h=e[4],m=e[5];return Math.abs(n-u)<=d*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-l)<=d*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(i-c)<=d*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(a-f)<=d*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(o-h)<=d*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(s-m)<=d*Math.max(1,Math.abs(s),Math.abs(m))}var pt=tt,_t=ct;function vt(){var t=new m(9);return m!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function gt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function bt(t){var e=new m(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function yt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Mt(t,e,n,r,i,a,o,s,u){var l=new m(9);return l[0]=t,l[1]=e,l[2]=n,l[3]=r,l[4]=i,l[5]=a,l[6]=o,l[7]=s,l[8]=u,l}function xt(t,e,n,r,i,a,o,s,u,l){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=u,t[8]=l,t}function wt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Pt(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Ct(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],c=e[8],f=c*o-s*l,h=-c*a+s*u,d=l*a-o*u,m=n*f+r*h+i*d;return m?(m=1/m,t[0]=f*m,t[1]=(-c*r+i*l)*m,t[2]=(s*r-i*o)*m,t[3]=h*m,t[4]=(c*n-i*u)*m,t[5]=(-s*n+i*a)*m,t[6]=d*m,t[7]=(-l*n+r*u)*m,t[8]=(o*n-r*a)*m,t):null}function Et(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],c=e[8];return t[0]=o*c-s*l,t[1]=i*l-r*c,t[2]=r*s-i*o,t[3]=s*u-a*c,t[4]=n*c-i*u,t[5]=i*a-n*s,t[6]=a*l-o*u,t[7]=r*u-n*l,t[8]=n*o-r*a,t}function St(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],u=t[7],l=t[8];return e*(l*a-o*u)+n*(-l*i+o*s)+r*(u*i-a*s)}function At(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=n[0],d=n[1],m=n[2],p=n[3],_=n[4],v=n[5],g=n[6],b=n[7],y=n[8];return t[0]=h*r+d*o+m*l,t[1]=h*i+d*s+m*c,t[2]=h*a+d*u+m*f,t[3]=p*r+_*o+v*l,t[4]=p*i+_*s+v*c,t[5]=p*a+_*u+v*f,t[6]=g*r+b*o+y*l,t[7]=g*i+b*s+y*c,t[8]=g*a+b*u+y*f,t}function Ot(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=n[0],d=n[1];return t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=u,t[6]=h*r+d*o+l,t[7]=h*i+d*s+c,t[8]=h*a+d*u+f,t}function Bt(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=Math.sin(n),d=Math.cos(n);return t[0]=d*r+h*o,t[1]=d*i+h*s,t[2]=d*a+h*u,t[3]=d*o-h*r,t[4]=d*s-h*i,t[5]=d*u-h*a,t[6]=l,t[7]=c,t[8]=f,t}function Tt(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Ft(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function Ut(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function kt(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Lt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function Rt(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n+n,s=r+r,u=i+i,l=n*o,c=r*o,f=r*s,h=i*o,d=i*s,m=i*u,p=a*o,_=a*s,v=a*u;return t[0]=1-f-m,t[3]=c-v,t[6]=h+_,t[1]=c+v,t[4]=1-l-m,t[7]=d-p,t[2]=h-_,t[5]=d+p,t[8]=1-l-f,t}function It(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],c=e[8],f=e[9],h=e[10],d=e[11],m=e[12],p=e[13],_=e[14],v=e[15],g=n*s-r*o,b=n*u-i*o,y=n*l-a*o,M=r*u-i*s,x=r*l-a*s,w=i*l-a*u,P=c*p-f*m,C=c*_-h*m,E=c*v-d*m,S=f*_-h*p,A=f*v-d*p,O=h*v-d*_,B=g*O-b*A+y*S+M*E-x*C+w*P;return B?(B=1/B,t[0]=(s*O-u*A+l*S)*B,t[1]=(u*E-o*O-l*C)*B,t[2]=(o*A-s*E+l*P)*B,t[3]=(i*A-r*O-a*S)*B,t[4]=(n*O-i*E+a*C)*B,t[5]=(r*E-n*A-a*P)*B,t[6]=(p*w-_*x+v*M)*B,t[7]=(_*y-m*w-v*b)*B,t[8]=(m*x-p*y+v*g)*B,t):null}function Vt(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Dt(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Nt(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function Gt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function Ht(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function zt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function qt(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function jt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function Wt(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=e[0],h=e[1],m=e[2],p=e[3],_=e[4],v=e[5],g=e[6],b=e[7],y=e[8];return Math.abs(n-f)<=d*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-h)<=d*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(i-m)<=d*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(a-p)<=d*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(o-_)<=d*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(s-v)<=d*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(u-g)<=d*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(l-b)<=d*Math.max(1,Math.abs(l),Math.abs(b))&&Math.abs(c-y)<=d*Math.max(1,Math.abs(c),Math.abs(y))}var Xt=At,Yt=Ht;function Qt(){var t=new m(16);return m!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Zt(t){var e=new m(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Kt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Jt(t,e,n,r,i,a,o,s,u,l,c,f,h,d,p,_){var v=new m(16);return v[0]=t,v[1]=e,v[2]=n,v[3]=r,v[4]=i,v[5]=a,v[6]=o,v[7]=s,v[8]=u,v[9]=l,v[10]=c,v[11]=f,v[12]=h,v[13]=d,v[14]=p,v[15]=_,v}function $t(t,e,n,r,i,a,o,s,u,l,c,f,h,d,m,p,_){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=u,t[8]=l,t[9]=c,t[10]=f,t[11]=h,t[12]=d,t[13]=m,t[14]=p,t[15]=_,t}function te(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ee(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],a=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=a,t[11]=e[14],t[12]=i,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function ne(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],c=e[8],f=e[9],h=e[10],d=e[11],m=e[12],p=e[13],_=e[14],v=e[15],g=n*s-r*o,b=n*u-i*o,y=n*l-a*o,M=r*u-i*s,x=r*l-a*s,w=i*l-a*u,P=c*p-f*m,C=c*_-h*m,E=c*v-d*m,S=f*_-h*p,A=f*v-d*p,O=h*v-d*_,B=g*O-b*A+y*S+M*E-x*C+w*P;return B?(B=1/B,t[0]=(s*O-u*A+l*S)*B,t[1]=(i*A-r*O-a*S)*B,t[2]=(p*w-_*x+v*M)*B,t[3]=(h*x-f*w-d*M)*B,t[4]=(u*E-o*O-l*C)*B,t[5]=(n*O-i*E+a*C)*B,t[6]=(_*y-m*w-v*b)*B,t[7]=(c*w-h*y+d*b)*B,t[8]=(o*A-s*E+l*P)*B,t[9]=(r*E-n*A-a*P)*B,t[10]=(m*x-p*y+v*g)*B,t[11]=(f*y-c*x-d*g)*B,t[12]=(s*C-o*S-u*P)*B,t[13]=(n*S-r*C+i*P)*B,t[14]=(p*b-m*M-_*g)*B,t[15]=(c*M-f*b+h*g)*B,t):null}function re(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],c=e[8],f=e[9],h=e[10],d=e[11],m=e[12],p=e[13],_=e[14],v=e[15];return t[0]=s*(h*v-d*_)-f*(u*v-l*_)+p*(u*d-l*h),t[1]=-(r*(h*v-d*_)-f*(i*v-a*_)+p*(i*d-a*h)),t[2]=r*(u*v-l*_)-s*(i*v-a*_)+p*(i*l-a*u),t[3]=-(r*(u*d-l*h)-s*(i*d-a*h)+f*(i*l-a*u)),t[4]=-(o*(h*v-d*_)-c*(u*v-l*_)+m*(u*d-l*h)),t[5]=n*(h*v-d*_)-c*(i*v-a*_)+m*(i*d-a*h),t[6]=-(n*(u*v-l*_)-o*(i*v-a*_)+m*(i*l-a*u)),t[7]=n*(u*d-l*h)-o*(i*d-a*h)+c*(i*l-a*u),t[8]=o*(f*v-d*p)-c*(s*v-l*p)+m*(s*d-l*f),t[9]=-(n*(f*v-d*p)-c*(r*v-a*p)+m*(r*d-a*f)),t[10]=n*(s*v-l*p)-o*(r*v-a*p)+m*(r*l-a*s),t[11]=-(n*(s*d-l*f)-o*(r*d-a*f)+c*(r*l-a*s)),t[12]=-(o*(f*_-h*p)-c*(s*_-u*p)+m*(s*h-u*f)),t[13]=n*(f*_-h*p)-c*(r*_-i*p)+m*(r*h-i*f),t[14]=-(n*(s*_-u*p)-o*(r*_-i*p)+m*(r*u-i*s)),t[15]=n*(s*h-u*f)-o*(r*h-i*f)+c*(r*u-i*s),t}function ie(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],u=t[7],l=t[8],c=t[9],f=t[10],h=t[11],d=t[12],m=t[13],p=t[14],_=t[15];return(e*o-n*a)*(f*_-h*p)-(e*s-r*a)*(c*_-h*m)+(e*u-i*a)*(c*p-f*m)+(n*s-r*o)*(l*_-h*d)-(n*u-i*o)*(l*p-f*d)+(r*u-i*s)*(l*m-c*d)}function ae(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=e[9],d=e[10],m=e[11],p=e[12],_=e[13],v=e[14],g=e[15],b=n[0],y=n[1],M=n[2],x=n[3];return t[0]=b*r+y*s+M*f+x*p,t[1]=b*i+y*u+M*h+x*_,t[2]=b*a+y*l+M*d+x*v,t[3]=b*o+y*c+M*m+x*g,b=n[4],y=n[5],M=n[6],x=n[7],t[4]=b*r+y*s+M*f+x*p,t[5]=b*i+y*u+M*h+x*_,t[6]=b*a+y*l+M*d+x*v,t[7]=b*o+y*c+M*m+x*g,b=n[8],y=n[9],M=n[10],x=n[11],t[8]=b*r+y*s+M*f+x*p,t[9]=b*i+y*u+M*h+x*_,t[10]=b*a+y*l+M*d+x*v,t[11]=b*o+y*c+M*m+x*g,b=n[12],y=n[13],M=n[14],x=n[15],t[12]=b*r+y*s+M*f+x*p,t[13]=b*i+y*u+M*h+x*_,t[14]=b*a+y*l+M*d+x*v,t[15]=b*o+y*c+M*m+x*g,t}function oe(t,e,n){var r,i,a,o,s,u,l,c,f,h,d,m,p=n[0],_=n[1],v=n[2];return e===t?(t[12]=e[0]*p+e[4]*_+e[8]*v+e[12],t[13]=e[1]*p+e[5]*_+e[9]*v+e[13],t[14]=e[2]*p+e[6]*_+e[10]*v+e[14],t[15]=e[3]*p+e[7]*_+e[11]*v+e[15]):(r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=e[9],d=e[10],m=e[11],t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=f,t[9]=h,t[10]=d,t[11]=m,t[12]=r*p+s*_+f*v+e[12],t[13]=i*p+u*_+h*v+e[13],t[14]=a*p+l*_+d*v+e[14],t[15]=o*p+c*_+m*v+e[15]),t}function se(t,e,n){var r=n[0],i=n[1],a=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ue(t,e,n,r){var i,a,o,s,u,l,c,f,h,m,p,_,v,g,b,y,M,x,w,P,C,E,S,A,O=r[0],B=r[1],T=r[2],F=Math.hypot(O,B,T);return F<d?null:(O*=F=1/F,B*=F,T*=F,i=Math.sin(n),o=1-(a=Math.cos(n)),s=e[0],u=e[1],l=e[2],c=e[3],f=e[4],h=e[5],m=e[6],p=e[7],_=e[8],v=e[9],g=e[10],b=e[11],y=O*O*o+a,M=B*O*o+T*i,x=T*O*o-B*i,w=O*B*o-T*i,P=B*B*o+a,C=T*B*o+O*i,E=O*T*o+B*i,S=B*T*o-O*i,A=T*T*o+a,t[0]=s*y+f*M+_*x,t[1]=u*y+h*M+v*x,t[2]=l*y+m*M+g*x,t[3]=c*y+p*M+b*x,t[4]=s*w+f*P+_*C,t[5]=u*w+h*P+v*C,t[6]=l*w+m*P+g*C,t[7]=c*w+p*P+b*C,t[8]=s*E+f*S+_*A,t[9]=u*E+h*S+v*A,t[10]=l*E+m*S+g*A,t[11]=c*E+p*S+b*A,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function le(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*i+l*r,t[5]=o*i+c*r,t[6]=s*i+f*r,t[7]=u*i+h*r,t[8]=l*i-a*r,t[9]=c*i-o*r,t[10]=f*i-s*r,t[11]=h*i-u*r,t}function ce(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[0],o=e[1],s=e[2],u=e[3],l=e[8],c=e[9],f=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i-l*r,t[1]=o*i-c*r,t[2]=s*i-f*r,t[3]=u*i-h*r,t[8]=a*r+l*i,t[9]=o*r+c*i,t[10]=s*r+f*i,t[11]=u*r+h*i,t}function fe(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[0],o=e[1],s=e[2],u=e[3],l=e[4],c=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i+l*r,t[1]=o*i+c*r,t[2]=s*i+f*r,t[3]=u*i+h*r,t[4]=l*i-a*r,t[5]=c*i-o*r,t[6]=f*i-s*r,t[7]=h*i-u*r,t}function he(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function de(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function me(t,e,n){var r,i,a,o=n[0],s=n[1],u=n[2],l=Math.hypot(o,s,u);return l<d?null:(o*=l=1/l,s*=l,u*=l,r=Math.sin(e),a=1-(i=Math.cos(e)),t[0]=o*o*a+i,t[1]=s*o*a+u*r,t[2]=u*o*a-s*r,t[3]=0,t[4]=o*s*a-u*r,t[5]=s*s*a+i,t[6]=u*s*a+o*r,t[7]=0,t[8]=o*u*a+s*r,t[9]=s*u*a-o*r,t[10]=u*u*a+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function pe(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _e(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ve(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ge(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=r+r,u=i+i,l=a+a,c=r*s,f=r*u,h=r*l,d=i*u,m=i*l,p=a*l,_=o*s,v=o*u,g=o*l;return t[0]=1-(d+p),t[1]=f+g,t[2]=h-v,t[3]=0,t[4]=f-g,t[5]=1-(c+p),t[6]=m+_,t[7]=0,t[8]=h+v,t[9]=m-_,t[10]=1-(c+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function be(t,e){var n=new m(3),r=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=r*r+i*i+a*a+o*o;return f>0?(n[0]=2*(s*o+c*r+u*a-l*i)/f,n[1]=2*(u*o+c*i+l*r-s*a)/f,n[2]=2*(l*o+c*a+s*i-u*r)/f):(n[0]=2*(s*o+c*r+u*a-l*i),n[1]=2*(u*o+c*i+l*r-s*a),n[2]=2*(l*o+c*a+s*i-u*r)),ge(t,e,n),t}function ye(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Me(t,e){var n=e[0],r=e[1],i=e[2],a=e[4],o=e[5],s=e[6],u=e[8],l=e[9],c=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(a,o,s),t[2]=Math.hypot(u,l,c),t}function xe(t,e){var n=new m(3);Me(n,e);var r=1/n[0],i=1/n[1],a=1/n[2],o=e[0]*r,s=e[1]*i,u=e[2]*a,l=e[4]*r,c=e[5]*i,f=e[6]*a,h=e[8]*r,d=e[9]*i,p=e[10]*a,_=o+c+p,v=0;return _>0?(v=2*Math.sqrt(_+1),t[3]=.25*v,t[0]=(f-d)/v,t[1]=(h-u)/v,t[2]=(s-l)/v):o>c&&o>p?(v=2*Math.sqrt(1+o-c-p),t[3]=(f-d)/v,t[0]=.25*v,t[1]=(s+l)/v,t[2]=(h+u)/v):c>p?(v=2*Math.sqrt(1+c-o-p),t[3]=(h-u)/v,t[0]=(s+l)/v,t[1]=.25*v,t[2]=(f+d)/v):(v=2*Math.sqrt(1+p-o-c),t[3]=(s-l)/v,t[0]=(h+u)/v,t[1]=(f+d)/v,t[2]=.25*v),t}function we(t,e,n,r){var i=e[0],a=e[1],o=e[2],s=e[3],u=i+i,l=a+a,c=o+o,f=i*u,h=i*l,d=i*c,m=a*l,p=a*c,_=o*c,v=s*u,g=s*l,b=s*c,y=r[0],M=r[1],x=r[2];return t[0]=(1-(m+_))*y,t[1]=(h+b)*y,t[2]=(d-g)*y,t[3]=0,t[4]=(h-b)*M,t[5]=(1-(f+_))*M,t[6]=(p+v)*M,t[7]=0,t[8]=(d+g)*x,t[9]=(p-v)*x,t[10]=(1-(f+m))*x,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Pe(t,e,n,r,i){var a=e[0],o=e[1],s=e[2],u=e[3],l=a+a,c=o+o,f=s+s,h=a*l,d=a*c,m=a*f,p=o*c,_=o*f,v=s*f,g=u*l,b=u*c,y=u*f,M=r[0],x=r[1],w=r[2],P=i[0],C=i[1],E=i[2],S=(1-(p+v))*M,A=(d+y)*M,O=(m-b)*M,B=(d-y)*x,T=(1-(h+v))*x,F=(_+g)*x,U=(m+b)*w,k=(_-g)*w,L=(1-(h+p))*w;return t[0]=S,t[1]=A,t[2]=O,t[3]=0,t[4]=B,t[5]=T,t[6]=F,t[7]=0,t[8]=U,t[9]=k,t[10]=L,t[11]=0,t[12]=n[0]+P-(S*P+B*C+U*E),t[13]=n[1]+C-(A*P+T*C+k*E),t[14]=n[2]+E-(O*P+F*C+L*E),t[15]=1,t}function Ce(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n+n,s=r+r,u=i+i,l=n*o,c=r*o,f=r*s,h=i*o,d=i*s,m=i*u,p=a*o,_=a*s,v=a*u;return t[0]=1-f-m,t[1]=c+v,t[2]=h-_,t[3]=0,t[4]=c-v,t[5]=1-l-m,t[6]=d+p,t[7]=0,t[8]=h+_,t[9]=d-p,t[10]=1-l-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ee(t,e,n,r,i,a,o){var s=1/(n-e),u=1/(i-r),l=1/(a-o);return t[0]=2*a*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(o+a)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*a*2*l,t[15]=0,t}function Se(t,e,n,r,i){var a,o=1/Math.tan(e/2);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(a=1/(r-i),t[10]=(i+r)*a,t[14]=2*i*r*a):(t[10]=-1,t[14]=-2*r),t}var Ae=Se;function Oe(t,e,n,r,i){var a,o=1/Math.tan(e/2);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(a=1/(r-i),t[10]=i*a,t[14]=i*r*a):(t[10]=-1,t[14]=-r),t}function Be(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(o+s),l=2/(i+a);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(o-s)*u*.5,t[9]=(i-a)*l*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function Te(t,e,n,r,i,a,o){var s=1/(e-n),u=1/(r-i),l=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(o+a)*l,t[15]=1,t}var Fe=Te;function Ue(t,e,n,r,i,a,o){var s=1/(e-n),u=1/(r-i),l=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=l,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=a*l,t[15]=1,t}function ke(t,e,n,r){var i,a,o,s,u,l,c,f,h,m,p=e[0],_=e[1],v=e[2],g=r[0],b=r[1],y=r[2],M=n[0],x=n[1],w=n[2];return Math.abs(p-M)<d&&Math.abs(_-x)<d&&Math.abs(v-w)<d?te(t):(c=p-M,f=_-x,h=v-w,i=b*(h*=m=1/Math.hypot(c,f,h))-y*(f*=m),a=y*(c*=m)-g*h,o=g*f-b*c,(m=Math.hypot(i,a,o))?(i*=m=1/m,a*=m,o*=m):(i=0,a=0,o=0),s=f*o-h*a,u=h*i-c*o,l=c*a-f*i,(m=Math.hypot(s,u,l))?(s*=m=1/m,u*=m,l*=m):(s=0,u=0,l=0),t[0]=i,t[1]=s,t[2]=c,t[3]=0,t[4]=a,t[5]=u,t[6]=f,t[7]=0,t[8]=o,t[9]=l,t[10]=h,t[11]=0,t[12]=-(i*p+a*_+o*v),t[13]=-(s*p+u*_+l*v),t[14]=-(c*p+f*_+h*v),t[15]=1,t)}function Le(t,e,n,r){var i=e[0],a=e[1],o=e[2],s=r[0],u=r[1],l=r[2],c=i-n[0],f=a-n[1],h=o-n[2],d=c*c+f*f+h*h;d>0&&(c*=d=1/Math.sqrt(d),f*=d,h*=d);var m=u*h-l*f,p=l*c-s*h,_=s*f-u*c;return(d=m*m+p*p+_*_)>0&&(m*=d=1/Math.sqrt(d),p*=d,_*=d),t[0]=m,t[1]=p,t[2]=_,t[3]=0,t[4]=f*_-h*p,t[5]=h*m-c*_,t[6]=c*p-f*m,t[7]=0,t[8]=c,t[9]=f,t[10]=h,t[11]=0,t[12]=i,t[13]=a,t[14]=o,t[15]=1,t}function Re(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Ie(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Ve(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function De(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function Ne(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function Ge(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function He(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function ze(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=t[9],h=t[10],m=t[11],p=t[12],_=t[13],v=t[14],g=t[15],b=e[0],y=e[1],M=e[2],x=e[3],w=e[4],P=e[5],C=e[6],E=e[7],S=e[8],A=e[9],O=e[10],B=e[11],T=e[12],F=e[13],U=e[14],k=e[15];return Math.abs(n-b)<=d*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(r-y)<=d*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(i-M)<=d*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(a-x)<=d*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(o-w)<=d*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(s-P)<=d*Math.max(1,Math.abs(s),Math.abs(P))&&Math.abs(u-C)<=d*Math.max(1,Math.abs(u),Math.abs(C))&&Math.abs(l-E)<=d*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(c-S)<=d*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(f-A)<=d*Math.max(1,Math.abs(f),Math.abs(A))&&Math.abs(h-O)<=d*Math.max(1,Math.abs(h),Math.abs(O))&&Math.abs(m-B)<=d*Math.max(1,Math.abs(m),Math.abs(B))&&Math.abs(p-T)<=d*Math.max(1,Math.abs(p),Math.abs(T))&&Math.abs(_-F)<=d*Math.max(1,Math.abs(_),Math.abs(F))&&Math.abs(v-U)<=d*Math.max(1,Math.abs(v),Math.abs(U))&&Math.abs(g-k)<=d*Math.max(1,Math.abs(g),Math.abs(k))}var qe=ae,je=De;function We(){var t=new m(3);return m!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Xe(t){var e=new m(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ye(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function Qe(t,e,n){var r=new m(3);return r[0]=t,r[1]=e,r[2]=n,r}function Ze(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ke(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function Je(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function $e(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function tn(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function en(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function nn(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function rn(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function an(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function on(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function sn(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function un(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function ln(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function cn(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.hypot(n,r,i)}function fn(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function hn(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function dn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function mn(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function pn(t,e){var n=e[0],r=e[1],i=e[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t}function _n(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function vn(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[0],s=n[1],u=n[2];return t[0]=i*u-a*s,t[1]=a*o-r*u,t[2]=r*s-i*o,t}function gn(t,e,n,r){var i=e[0],a=e[1],o=e[2];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t[2]=o+r*(n[2]-o),t}function bn(t,e,n,r,i,a){var o=a*a,s=o*(2*a-3)+1,u=o*(a-2)+a,l=o*(a-1),c=o*(3-2*a);return t[0]=e[0]*s+n[0]*u+r[0]*l+i[0]*c,t[1]=e[1]*s+n[1]*u+r[1]*l+i[1]*c,t[2]=e[2]*s+n[2]*u+r[2]*l+i[2]*c,t}function yn(t,e,n,r,i,a){var o=1-a,s=o*o,u=a*a,l=s*o,c=3*a*s,f=3*u*o,h=u*a;return t[0]=e[0]*l+n[0]*c+r[0]*f+i[0]*h,t[1]=e[1]*l+n[1]*c+r[1]*f+i[1]*h,t[2]=e[2]*l+n[2]*c+r[2]*f+i[2]*h,t}function Mn(t,e){e=e||1;var n=2*p()*Math.PI,r=2*p()-1,i=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=r*e,t}function xn(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[3]*r+n[7]*i+n[11]*a+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/o,t[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/o,t}function wn(t,e,n){var r=e[0],i=e[1],a=e[2];return t[0]=r*n[0]+i*n[3]+a*n[6],t[1]=r*n[1]+i*n[4]+a*n[7],t[2]=r*n[2]+i*n[5]+a*n[8],t}function Pn(t,e,n){var r=n[0],i=n[1],a=n[2],o=n[3],s=e[0],u=e[1],l=e[2],c=i*l-a*u,f=a*s-r*l,h=r*u-i*s,d=i*h-a*f,m=a*c-r*h,p=r*f-i*c,_=2*o;return c*=_,f*=_,h*=_,d*=2,m*=2,p*=2,t[0]=s+c+d,t[1]=u+f+m,t[2]=l+h+p,t}function Cn(t,e,n,r){var i=[],a=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],a[0]=i[0],a[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),a[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t}function En(t,e,n,r){var i=[],a=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],a[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),a[1]=i[1],a[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t}function Sn(t,e,n,r){var i=[],a=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],a[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),a[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),a[2]=i[2],t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t}function An(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],o=e[1],s=e[2],u=Math.sqrt(n*n+r*r+i*i)*Math.sqrt(a*a+o*o+s*s),l=u&&_n(t,e)/u;return Math.acos(Math.min(Math.max(l,-1),1))}function On(t){return t[0]=0,t[1]=0,t[2]=0,t}function Bn(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Tn(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Fn(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],o=e[1],s=e[2];return Math.abs(n-a)<=d*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-o)<=d*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-s)<=d*Math.max(1,Math.abs(i),Math.abs(s))}var Un,kn=$e,Ln=tn,Rn=en,In=cn,Vn=fn,Dn=Ye,Nn=hn,Gn=(Un=We(),function(t,e,n,r,i,a){var o,s;for(e||(e=3),n||(n=0),s=r?Math.min(r*e+n,t.length):t.length,o=n;o<s;o+=e)Un[0]=t[o],Un[1]=t[o+1],Un[2]=t[o+2],i(Un,Un,a),t[o]=Un[0],t[o+1]=Un[1],t[o+2]=Un[2];return t});function Hn(){var t=new m(4);return m!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function zn(t){var e=new m(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function qn(t,e,n,r){var i=new m(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function jn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Wn(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function Xn(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function Yn(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function Qn(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function Zn(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function Kn(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Jn(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function $n(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function tr(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function er(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function nr(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function rr(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function ir(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],a=e[3]-t[3];return Math.hypot(n,r,i,a)}function ar(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],a=e[3]-t[3];return n*n+r*r+i*i+a*a}function or(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.hypot(e,n,r,i)}function sr(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function ur(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function lr(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function cr(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n*n+r*r+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=r*o,t[2]=i*o,t[3]=a*o,t}function fr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function hr(t,e,n,r){var i=n[0]*r[1]-n[1]*r[0],a=n[0]*r[2]-n[2]*r[0],o=n[0]*r[3]-n[3]*r[0],s=n[1]*r[2]-n[2]*r[1],u=n[1]*r[3]-n[3]*r[1],l=n[2]*r[3]-n[3]*r[2],c=e[0],f=e[1],h=e[2],d=e[3];return t[0]=f*l-h*u+d*s,t[1]=-c*l+h*o-d*a,t[2]=c*u-f*o+d*i,t[3]=-c*s+f*a-h*i,t}function dr(t,e,n,r){var i=e[0],a=e[1],o=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t[2]=o+r*(n[2]-o),t[3]=s+r*(n[3]-s),t}function mr(t,e){var n,r,i,a,o,s;e=e||1;do{o=(n=2*p()-1)*n+(r=2*p()-1)*r}while(o>=1);do{s=(i=2*p()-1)*i+(a=2*p()-1)*a}while(s>=1);var u=Math.sqrt((1-o)/s);return t[0]=e*n,t[1]=e*r,t[2]=e*i*u,t[3]=e*a*u,t}function pr(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,t[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,t[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,t[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,t}function _r(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[0],s=n[1],u=n[2],l=n[3],c=l*r+s*a-u*i,f=l*i+u*r-o*a,h=l*a+o*i-s*r,d=-o*r-s*i-u*a;return t[0]=c*l+d*-o+f*-u-h*-s,t[1]=f*l+d*-s+h*-o-c*-u,t[2]=h*l+d*-u+c*-s-f*-o,t[3]=e[3],t}function vr(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function gr(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function br(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function yr(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=e[0],s=e[1],u=e[2],l=e[3];return Math.abs(n-o)<=d*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-s)<=d*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=d*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-l)<=d*Math.max(1,Math.abs(a),Math.abs(l))}var Mr=Yn,xr=Qn,wr=Zn,Pr=ir,Cr=ar,Er=or,Sr=sr,Ar=function(){var t=Hn();return function(e,n,r,i,a,o){var s,u;for(n||(n=4),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],a(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}();function Or(){var t=new m(4);return m!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Br(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Tr(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function Fr(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>d?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function Ur(t,e){var n=ui(t,e);return Math.acos(2*n*n-1)}function kr(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=n[0],u=n[1],l=n[2],c=n[3];return t[0]=r*c+o*s+i*l-a*u,t[1]=i*c+o*u+a*s-r*l,t[2]=a*c+o*l+r*u-i*s,t[3]=o*c-r*s-i*u-a*l,t}function Lr(t,e,n){n*=.5;var r=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=a*u-i*s,t[3]=o*u-r*s,t}function Rr(t,e,n){n*=.5;var r=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u-a*s,t[1]=i*u+o*s,t[2]=a*u+r*s,t[3]=o*u-i*s,t}function Ir(t,e,n){n*=.5;var r=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*s,t[1]=i*u-r*s,t[2]=a*u+o*s,t[3]=o*u-a*s,t}function Vr(t,e){var n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t}function Dr(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=Math.sqrt(n*n+r*r+i*i),s=Math.exp(a),u=o>0?s*Math.sin(o)/o:0;return t[0]=n*u,t[1]=r*u,t[2]=i*u,t[3]=s*Math.cos(o),t}function Nr(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=Math.sqrt(n*n+r*r+i*i),s=o>0?Math.atan2(o,a)/o:0;return t[0]=n*s,t[1]=r*s,t[2]=i*s,t[3]=.5*Math.log(n*n+r*r+i*i+a*a),t}function Gr(t,e,n){return Nr(t,e),si(t,t,n),Dr(t,t),t}function Hr(t,e,n,r){var i,a,o,s,u,l=e[0],c=e[1],f=e[2],h=e[3],m=n[0],p=n[1],_=n[2],v=n[3];return(a=l*m+c*p+f*_+h*v)<0&&(a=-a,m=-m,p=-p,_=-_,v=-v),1-a>d?(i=Math.acos(a),o=Math.sin(i),s=Math.sin((1-r)*i)/o,u=Math.sin(r*i)/o):(s=1-r,u=r),t[0]=s*l+u*m,t[1]=s*c+u*p,t[2]=s*f+u*_,t[3]=s*h+u*v,t}function zr(t){var e=p(),n=p(),r=p(),i=Math.sqrt(1-e),a=Math.sqrt(e);return t[0]=i*Math.sin(2*Math.PI*n),t[1]=i*Math.cos(2*Math.PI*n),t[2]=a*Math.sin(2*Math.PI*r),t[3]=a*Math.cos(2*Math.PI*r),t}function qr(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n*n+r*r+i*i+a*a,s=o?1/o:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-i*s,t[3]=a*s,t}function jr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Wr(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*a+a]-e[3*o+o]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*a+o]-e[3*o+a])*n,t[a]=(e[3*a+i]+e[3*i+a])*n,t[o]=(e[3*o+i]+e[3*i+o])*n}return t}function Xr(t,e,n,r){var i=.5*Math.PI/180;e*=i,n*=i,r*=i;var a=Math.sin(e),o=Math.cos(e),s=Math.sin(n),u=Math.cos(n),l=Math.sin(r),c=Math.cos(r);return t[0]=a*u*c-o*s*l,t[1]=o*s*c+a*u*l,t[2]=o*u*l-a*s*c,t[3]=o*u*c+a*s*l,t}function Yr(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Qr,Zr,Kr,Jr,$r,ti,ei=zn,ni=qn,ri=jn,ii=Wn,ai=Xn,oi=kr,si=nr,ui=fr,li=dr,ci=or,fi=ci,hi=sr,di=hi,mi=cr,pi=br,_i=yr,vi=(Qr=We(),Zr=Qe(1,0,0),Kr=Qe(0,1,0),function(t,e,n){var r=_n(e,n);return r<-.999999?(vn(Qr,Zr,e),Dn(Qr)<1e-6&&vn(Qr,Kr,e),pn(Qr,Qr),Tr(t,Qr,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(vn(Qr,e,n),t[0]=Qr[0],t[1]=Qr[1],t[2]=Qr[2],t[3]=1+r,mi(t,t))}),gi=(Jr=Or(),$r=Or(),function(t,e,n,r,i,a){return Hr(Jr,e,i,a),Hr($r,n,r,a),Hr(t,Jr,$r,2*a*(1-a)),t}),bi=(ti=vt(),function(t,e,n,r){return ti[0]=n[0],ti[3]=n[1],ti[6]=n[2],ti[1]=r[0],ti[4]=r[1],ti[7]=r[2],ti[2]=-e[0],ti[5]=-e[1],ti[8]=-e[2],mi(t,Wr(t,ti))});function yi(){var t=new m(8);return m!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function Mi(t){var e=new m(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function xi(t,e,n,r,i,a,o,s){var u=new m(8);return u[0]=t,u[1]=e,u[2]=n,u[3]=r,u[4]=i,u[5]=a,u[6]=o,u[7]=s,u}function wi(t,e,n,r,i,a,o){var s=new m(8);s[0]=t,s[1]=e,s[2]=n,s[3]=r;var u=.5*i,l=.5*a,c=.5*o;return s[4]=u*r+l*n-c*e,s[5]=l*r+c*t-u*n,s[6]=c*r+u*e-l*t,s[7]=-u*t-l*e-c*n,s}function Pi(t,e,n){var r=.5*n[0],i=.5*n[1],a=.5*n[2],o=e[0],s=e[1],u=e[2],l=e[3];return t[0]=o,t[1]=s,t[2]=u,t[3]=l,t[4]=r*l+i*u-a*s,t[5]=i*l+a*o-r*u,t[6]=a*l+r*s-i*o,t[7]=-r*o-i*s-a*u,t}function Ci(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function Ei(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Si(t,e){var n=Or();xe(n,e);var r=new m(3);return ye(r,e),Pi(t,n,r),t}function Ai(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function Oi(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Bi(t,e,n,r,i,a,o,s,u){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=u,t}var Ti=ri;function Fi(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var Ui=ri;function ki(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function Li(t,e){var n=e[4],r=e[5],i=e[6],a=e[7],o=-e[0],s=-e[1],u=-e[2],l=e[3];return t[0]=2*(n*l+a*o+r*u-i*s),t[1]=2*(r*l+a*s+i*o-n*u),t[2]=2*(i*l+a*u+n*s-r*o),t}function Ri(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=.5*n[0],u=.5*n[1],l=.5*n[2],c=e[4],f=e[5],h=e[6],d=e[7];return t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=o*s+i*l-a*u+c,t[5]=o*u+a*s-r*l+f,t[6]=o*l+r*u-i*s+h,t[7]=-r*s-i*u-a*l+d,t}function Ii(t,e,n){var r=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=s*o+c*r+u*a-l*i,h=u*o+c*i+l*r-s*a,d=l*o+c*a+s*i-u*r,m=c*o-s*r-u*i-l*a;return Lr(t,e,n),r=t[0],i=t[1],a=t[2],o=t[3],t[4]=f*o+m*r+h*a-d*i,t[5]=h*o+m*i+d*r-f*a,t[6]=d*o+m*a+f*i-h*r,t[7]=m*o-f*r-h*i-d*a,t}function Vi(t,e,n){var r=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=s*o+c*r+u*a-l*i,h=u*o+c*i+l*r-s*a,d=l*o+c*a+s*i-u*r,m=c*o-s*r-u*i-l*a;return Rr(t,e,n),r=t[0],i=t[1],a=t[2],o=t[3],t[4]=f*o+m*r+h*a-d*i,t[5]=h*o+m*i+d*r-f*a,t[6]=d*o+m*a+f*i-h*r,t[7]=m*o-f*r-h*i-d*a,t}function Di(t,e,n){var r=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=s*o+c*r+u*a-l*i,h=u*o+c*i+l*r-s*a,d=l*o+c*a+s*i-u*r,m=c*o-s*r-u*i-l*a;return Ir(t,e,n),r=t[0],i=t[1],a=t[2],o=t[3],t[4]=f*o+m*r+h*a-d*i,t[5]=h*o+m*i+d*r-f*a,t[6]=d*o+m*a+f*i-h*r,t[7]=m*o-f*r-h*i-d*a,t}function Ni(t,e,n){var r=n[0],i=n[1],a=n[2],o=n[3],s=e[0],u=e[1],l=e[2],c=e[3];return t[0]=s*o+c*r+u*a-l*i,t[1]=u*o+c*i+l*r-s*a,t[2]=l*o+c*a+s*i-u*r,t[3]=c*o-s*r-u*i-l*a,s=e[4],u=e[5],l=e[6],c=e[7],t[4]=s*o+c*r+u*a-l*i,t[5]=u*o+c*i+l*r-s*a,t[6]=l*o+c*a+s*i-u*r,t[7]=c*o-s*r-u*i-l*a,t}function Gi(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=n[0],u=n[1],l=n[2],c=n[3];return t[0]=r*c+o*s+i*l-a*u,t[1]=i*c+o*u+a*s-r*l,t[2]=a*c+o*l+r*u-i*s,t[3]=o*c-r*s-i*u-a*l,s=n[4],u=n[5],l=n[6],c=n[7],t[4]=r*c+o*s+i*l-a*u,t[5]=i*c+o*u+a*s-r*l,t[6]=a*c+o*l+r*u-i*s,t[7]=o*c-r*s-i*u-a*l,t}function Hi(t,e,n,r){if(Math.abs(r)<d)return Ai(t,e);var i=Math.hypot(n[0],n[1],n[2]);r*=.5;var a=Math.sin(r),o=a*n[0]/i,s=a*n[1]/i,u=a*n[2]/i,l=Math.cos(r),c=e[0],f=e[1],h=e[2],m=e[3];t[0]=c*l+m*o+f*u-h*s,t[1]=f*l+m*s+h*o-c*u,t[2]=h*l+m*u+c*s-f*o,t[3]=m*l-c*o-f*s-h*u;var p=e[4],_=e[5],v=e[6],g=e[7];return t[4]=p*l+g*o+_*u-v*s,t[5]=_*l+g*s+v*o-p*u,t[6]=v*l+g*u+p*s-_*o,t[7]=g*l-p*o-_*s-v*u,t}function zi(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t}function qi(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=n[4],u=n[5],l=n[6],c=n[7],f=e[4],h=e[5],d=e[6],m=e[7],p=n[0],_=n[1],v=n[2],g=n[3];return t[0]=r*g+o*p+i*v-a*_,t[1]=i*g+o*_+a*p-r*v,t[2]=a*g+o*v+r*_-i*p,t[3]=o*g-r*p-i*_-a*v,t[4]=r*c+o*s+i*l-a*u+f*g+m*p+h*v-d*_,t[5]=i*c+o*u+a*s-r*l+h*g+m*_+d*p-f*v,t[6]=a*c+o*l+r*u-i*s+d*g+m*v+f*_-h*p,t[7]=o*c-r*s-i*u-a*l+m*g-f*p-h*_-d*v,t}var ji=qi;function Wi(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t}var Xi=ui;function Yi(t,e,n,r){var i=1-r;return Xi(e,n)<0&&(r=-r),t[0]=e[0]*i+n[0]*r,t[1]=e[1]*i+n[1]*r,t[2]=e[2]*i+n[2]*r,t[3]=e[3]*i+n[3]*r,t[4]=e[4]*i+n[4]*r,t[5]=e[5]*i+n[5]*r,t[6]=e[6]*i+n[6]*r,t[7]=e[7]*i+n[7]*r,t}function Qi(t,e){var n=$i(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t}function Zi(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var Ki=ci,Ji=Ki,$i=hi,ta=$i;function ea(t,e){var n=$i(e);if(n>0){n=Math.sqrt(n);var r=e[0]/n,i=e[1]/n,a=e[2]/n,o=e[3]/n,s=e[4],u=e[5],l=e[6],c=e[7],f=r*s+i*u+a*l+o*c;t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=(s-r*f)/n,t[5]=(u-i*f)/n,t[6]=(l-a*f)/n,t[7]=(c-o*f)/n}return t}function na(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function ra(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function ia(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=e[0],f=e[1],h=e[2],m=e[3],p=e[4],_=e[5],v=e[6],g=e[7];return Math.abs(n-c)<=d*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(r-f)<=d*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(i-h)<=d*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(a-m)<=d*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(o-p)<=d*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(s-_)<=d*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(u-v)<=d*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(l-g)<=d*Math.max(1,Math.abs(l),Math.abs(g))}function aa(){var t=new m(2);return m!=Float32Array&&(t[0]=0,t[1]=0),t}function oa(t){var e=new m(2);return e[0]=t[0],e[1]=t[1],e}function sa(t,e){var n=new m(2);return n[0]=t,n[1]=e,n}function ua(t,e){return t[0]=e[0],t[1]=e[1],t}function la(t,e,n){return t[0]=e,t[1]=n,t}function ca(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function fa(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function ha(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function da(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function ma(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function pa(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function _a(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function va(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function ga(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function ba(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function ya(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function Ma(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.hypot(n,r)}function xa(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function wa(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function Pa(t){var e=t[0],n=t[1];return e*e+n*n}function Ca(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Ea(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function Sa(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function Aa(t,e){return t[0]*e[0]+t[1]*e[1]}function Oa(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function Ba(t,e,n,r){var i=e[0],a=e[1];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t}function Ta(t,e){e=e||1;var n=2*p()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function Fa(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t}function Ua(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function ka(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function La(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}function Ra(t,e,n,r){var i=e[0]-n[0],a=e[1]-n[1],o=Math.sin(r),s=Math.cos(r);return t[0]=i*s-a*o+n[0],t[1]=i*o+a*s+n[1],t}function Ia(t,e){var n=t[0],r=t[1],i=e[0],a=e[1],o=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+a*a),s=o&&(n*i+r*a)/o;return Math.acos(Math.min(Math.max(s,-1),1))}function Va(t){return t[0]=0,t[1]=0,t}function Da(t){return"vec2("+t[0]+", "+t[1]+")"}function Na(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ga(t,e){var n=t[0],r=t[1],i=e[0],a=e[1];return Math.abs(n-i)<=d*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-a)<=d*Math.max(1,Math.abs(r),Math.abs(a))}var Ha=wa,za=fa,qa=ha,ja=da,Wa=Ma,Xa=xa,Ya=Pa,Qa=function(){var t=aa();return function(e,n,r,i,a,o){var s,u;for(n||(n=2),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],a(t,t,o),e[s]=t[0],e[s+1]=t[1];return e}}()},275:(t,e,n)=>{n.r(e),n.d(e,{default:()=>r});const r="fn rand(seed : vec2<f32>) -> f32 {\r\n\treturn fract(sin(dot(seed, vec2<f32>(12.9898, 4.1414))) * 43758.5453);\r\n}\r\n\r\nfn randUnitVec3(seed: f32, idx: f32) -> vec3<f32> {\r\n    var result = vec3<f32>();\r\n    result.x = rand(vec2<f32>(seed*idx, seed));\r\n    result.y = rand(vec2<f32>(result.x, idx));\r\n    result.z = rand(vec2<f32>(idx, result.y));\r\n    result = (result * 2) - 1;\r\n    return normalize(result);\r\n}\r\n\r\nstruct Particle {\r\n    position: vec3<f32>,\r\n    lifetime: f32,\r\n    velocity: vec3<f32>\r\n}\r\n\r\nstruct Particles {\r\n  particles : array<Particle>\r\n};\r\n\r\nstruct SimulationParams {\r\n    deltaTime: f32,\r\n    gravity: vec3<f32>,\r\n    origin: vec3<f32>,\r\n    minLifetime: f32,\r\n    maxLifetime: f32,\r\n    initialVelocity: f32,\r\n    randSeed: f32\r\n}\r\n\r\n@binding(0) @group(0) var<storage, read_write> data : Particles;\r\n@binding(1) @group(0) var<uniform> params : SimulationParams;\r\n\r\n@compute @workgroup_size(256)\r\nfn simulate(@builtin(global_invocation_id) GlobalInvocationID : vec3<u32>) {\r\n    let idx = GlobalInvocationID.x;\r\n\r\n    // load particle from buffer\r\n    var particle = data.particles[idx];\r\n\r\n    //reset expired particles\r\n    if (particle.lifetime <= 0) {\r\n        particle.lifetime = params.minLifetime + (params.maxLifetime - params.minLifetime) * rand(vec2<f32>(params.randSeed, f32(idx)));\r\n        particle.position = params.origin;\r\n\r\n        particle.velocity = vec3<f32>(0,0,0);\r\n        particle.velocity = randUnitVec3(params.randSeed, f32(idx)) * params.initialVelocity;\r\n    }\r\n\r\n    // apply gravity\r\n    particle.velocity = particle.velocity + (params.gravity * params.deltaTime);\r\n\r\n    // update particle data\r\n    particle.position = particle.position + (particle.velocity * params.deltaTime);\r\n    particle.lifetime = particle.lifetime - params.deltaTime;\r\n\r\n    // write updated particle data into buffer\r\n    data.particles[idx] = particle;\r\n}\r\n"},147:(t,e,n)=>{n.r(e),n.d(e,{default:()=>r});const r="struct Uniforms {\r\n  halfwidth: f32,\r\n  halfheight : f32\r\n};\r\n\r\nstruct Camera {\r\n    viewProjectionMatrix: mat4x4<f32>\r\n};\r\n\r\nstruct Particle {\r\n    position: vec3<f32>,\r\n    lifetime: f32,\r\n    velocity: vec3<f32>\r\n}\r\n\r\nstruct Particles {\r\n  particles : array<Particle>\r\n};\r\n\r\n@binding(0) @group(0) var<uniform> uniforms : Uniforms;\r\n@binding(1) @group(0) var<uniform> camera: Camera;\r\n@binding(0) @group(1) var<storage, read> particleBuffer : Particles;\r\n\r\nstruct VertexInput {\r\n    @location(0) position : vec3<f32>,\r\n    @location(1) lifetime :f32\r\n};\r\n\r\nstruct VertexOutput {\r\n    @builtin(position) position : vec4<f32>,\r\n    @location(0) uv: vec2<f32>,\r\n    @location(1) lifetime: f32\r\n};\r\n\r\n@vertex\r\nfn main_instancing(vertexInput: VertexInput, @builtin(vertex_index) VertexIndex: u32) -> VertexOutput {\r\n    return mainVert(vertexInput.position, vertexInput.lifetime, VertexIndex);\r\n}\r\n\r\n\r\n@vertex\r\nfn main_vertex_pulling(@builtin(vertex_index) vertexIndex: u32) -> VertexOutput {\r\n    let particleIdx = u32(vertexIndex/6);\r\n    let quadIdx = vertexIndex % 6;\r\n    let particle = particleBuffer.particles[particleIdx];\r\n\r\n    return mainVert(particle.position, particle.lifetime, quadIdx);\r\n}\r\n\r\nfn mainVert(particlePos: vec3<f32>, particleLifetime: f32, quadVertIdx: u32) -> VertexOutput {\r\n            var halfwidth = uniforms.halfwidth;\r\n            var halfheight = uniforms.halfheight;\r\n\r\n            var quadPos = array<vec2<f32>, 6>(\r\n                vec2<f32>(-halfwidth, halfheight),   //tl\r\n                vec2<f32>(-halfwidth, -halfheight),  //bl\r\n                vec2<f32>(halfwidth, -halfheight),   //br\r\n\r\n                vec2<f32>(halfwidth, -halfheight),   //br\r\n                vec2<f32>(halfwidth, halfheight),    //tr\r\n                vec2<f32>(-halfwidth, halfheight)    //tl\r\n            );\r\n\r\n            var uvs = array<vec2<f32>, 6>(\r\n                vec2<f32>(0, 1),  //tl\r\n                vec2<f32>(0, 0),  //bl\r\n                vec2<f32>(1, 0),  //br\r\n\r\n                vec2<f32>(1, 0),   //br\r\n                vec2<f32>(1, 1),   //tr\r\n                vec2<f32>(0, 1)    //tl\r\n            );\r\n\r\n\r\n            var transformedPosition : vec4<f32> = camera.viewProjectionMatrix * vec4<f32>(particlePos, 1.0);\r\n\r\n            var output: VertexOutput;\r\n            output.position = vec4<f32>(transformedPosition.x + quadPos[quadVertIdx].x, transformedPosition.y + quadPos[quadVertIdx].y, transformedPosition.z, 1.0);\r\n            output.uv = uvs[quadVertIdx];\r\n            output.lifetime = particleLifetime;\r\n            return output;\r\n}\r\n"},912:(t,e,n)=>{n.r(e),n.d(e,{default:()=>r});const r="struct ParticleFragmentUniforms {\r\n   color: vec4<f32>,\r\n   color2: vec4<f32>,\r\n   maxLifetime: f32\r\n}\r\n\r\n@binding(2) @group(0) var textureSampler : sampler;\r\n@binding(3) @group(0) var textureData : texture_2d<f32>;\r\n@binding(4) @group(0) var<uniform> particleUniforms: ParticleFragmentUniforms;\r\n\r\n@fragment\r\nfn main(@location(0) uv: vec2<f32>, @location(1) lifetime: f32) -> @location(0) vec4<f32> {\r\n    var textureColor : vec4<f32> = textureSample(textureData, textureSampler, uv);\r\n\r\n    // interpolate between the two colors\r\n    var colorWeight = lifetime / particleUniforms.maxLifetime;\r\n    var maxLifetimeColor = textureColor * particleUniforms.color;\r\n    var minLifetimeColor = textureColor * particleUniforms.color2;\r\n    textureColor = maxLifetimeColor * colorWeight + minLifetimeColor * (1.0-colorWeight);\r\n    return textureColor;\r\n}\r\n\r\n\r\n"},365:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FpsCounter=void 0,e.FpsCounter=class{constructor(){this._frameCounter=0,this._targetFPS=60,this._frameStartTime=performance.now()}update(){let t=performance.now();if(t-this._frameStartTime>1e3){const e=document.getElementById("fps-counter");if(!e)throw new Error("FPS counter html element not found");e.textContent=this._frameCounter+" FPS",this._frameCounter>=this._targetFPS?e.style.color="DarkGreen":this._frameCounter>=this._targetFPS-10?e.style.color="DarkGoldenRod":e.style.color="DarkRed",this._frameStartTime=t,this._frameCounter=0}this._frameCounter++}get frameCounter(){return this._frameCounter}get targetFPS(){return this._targetFPS}set targetFPS(t){this._targetFPS=t}}},517:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FragmentUniformBuffer=void 0,e.FragmentUniformBuffer=class{constructor(t,e,n,r){this._bufferSize=64,this.COLOR_OFFSET=0,this.COLOR2_OFFSET=this.COLOR_OFFSET+16,this.MAX_LIFETIME_OFFSET=this.COLOR2_OFFSET+16,this._device=t,this._uniformBuffer=t.createBuffer({size:this._bufferSize,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.setColor(e),this.setColor2(n),this.setMaxLifetime(r)}setColor(t){this._device.queue.writeBuffer(this._uniformBuffer,this.COLOR_OFFSET,t)}setColor2(t){this._device.queue.writeBuffer(this._uniformBuffer,this.COLOR2_OFFSET,t)}setMaxLifetime(t){this._device.queue.writeBuffer(this._uniformBuffer,this.MAX_LIFETIME_OFFSET,Float32Array.of(t))}get device(){return this._device}get uniformBuffer(){return this._uniformBuffer}get bufferSize(){return this._bufferSize}}},906:function(t,e,n){var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.ParticleGUI=void 0;const o=a(n(376)),s=n(913);e.ParticleGUI=class{constructor(){this.gui=new o.GUI,this._guiData={useCPU:!1,vertexPulling:!0,particleColor2:[252,118,39,255],particleColor:[230,220,155,255],numberOfParticles:1e5,minParticleLifetime:1,maxParticleLifetime:5,particleHeight:8,particleWidth:8},this.gui.remember(this._guiData),this.gui.add(this._guiData,"vertexPulling"),this.gui.add(this._guiData,"particleHeight"),this.gui.add(this._guiData,"particleWidth"),this.gui.add(this._guiData,"numberOfParticles"),this.gui.add(this._guiData,"minParticleLifetime"),this.gui.add(this._guiData,"maxParticleLifetime"),this.gui.addColor(this._guiData,"particleColor"),this.gui.addColor(this._guiData,"particleColor2")}get guiData(){return this._guiData.numberOfParticles*s.Particles.INSTANCE_SIZE>134217727&&(window.alert("Too many particles. Maximum number of particles: "+Math.floor(134217727/32)),this._guiData.numberOfParticles=1e5),this._guiData}}},949:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CheckWebGPU=void 0,e.CheckWebGPU=()=>{let t="Great, your current browser supports WebGPU!";return navigator.gpu||(t='Your current browser does not support WebGPU! Make sure you are on a system \n                     with WebGPU enabled. Currently, SPIR-WebGPU is only supported in  \n                     <a href="https://www.google.com/chrome/canary/">Chrome canary</a>\n                     with the flag "enable-unsafe-webgpu" enabled. See the \n                     <a href="https://github.com/gpuweb/gpuweb/wiki/Implementation-Status"> \n                     Implementation Status</a> page for more details.                   \n                    '),t}},620:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OrbitCamera=void 0;const r=n(887);class i{constructor(t,e,n,a=60,o=16/9,s=.001,u=1e3){this._rotationQuat=r.quat.create(),this._viewMatrix=r.mat4.create(),this.ZOOM_FACTOR=.001,this.MAX_ZOOM=500,this.MIN_ZOOM=.01,this.MOVE_FACTOR=1,this._prevMouseX=0,this._prevMouseY=0,this.currentXRotation=0,this.onMouseMove=t=>{let e=t.clientX,n=t.clientY;if(1===t.buttons){let t=(e-this._prevMouseX)*this.MOVE_FACTOR,r=(n-this._prevMouseY)*this.MOVE_FACTOR;this.rotate(0,t,0),this.rotate(r,0,0)}this._prevMouseX=e,this._prevMouseY=n},this._position=t,this._target=e,this._up=n,this._projectionMatrix=i.perspectiveWebGpuFormat(r.glMatrix.toRadian(a),o,s,u),this.updateViewMatrix();const l=document.getElementById("canvas-webgpu");l.onwheel=t=>{this.onMouseWheel(t.deltaY)},l.addEventListener("mousemove",this.onMouseMove)}getViewProjectionMatrix(){this.updateViewMatrix();let t=r.mat4.create();return r.mat4.multiply(t,this._projectionMatrix,this._viewMatrix),t}onMouseWheel(t){this._position[2]+=t*this.ZOOM_FACTOR,this._position[2]=Math.min(this.MAX_ZOOM,this._position[2]),this._position[2]=Math.max(this.MIN_ZOOM,this._position[2])}updateViewMatrix(){const t=r.mat4.create(),e=r.mat4.create();r.mat4.lookAt(t,this._position,this._target,this._up),r.mat4.fromQuat(e,this._rotationQuat),this._viewMatrix=t,this._viewMatrix=r.mat4.multiply(this._viewMatrix,t,e)}rotate(t,e,n){this.currentXRotation+=t;let i=Math.max(-89,this.currentXRotation);i=Math.min(89,i),t+=i-this.currentXRotation,this.currentXRotation=i;let a=r.quat.create();a=r.quat.fromEuler(a,t,e,n),r.quat.multiply(this._rotationQuat,a,this._rotationQuat),this.updateViewMatrix()}static perspectiveWebGpuFormat(t,e,n,i){let a=r.mat4.create();const o=Math.tan(.5*Math.PI-.5*t),s=1/(n-i);return a[0]=o/e,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=o,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=i*s,a[11]=-1,a[12]=0,a[13]=0,a[14]=n*i*s,a[15]=0,a}get position(){return this._position}set position(t){this._position=t,this.updateViewMatrix()}get target(){return this._target}set target(t){this._target=t,this.updateViewMatrix()}get up(){return this._up}set up(t){this._up=t,this.updateViewMatrix()}}e.OrbitCamera=i},913:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Particles=void 0;const i=n(887),a=n(593),o=r(n(275)),s=n(86);class u{constructor(t,e){this._numParticles=1e3,this._originPos=i.vec3.fromValues(0,0,0),this._initialVelocity=1,this._minParticleLifetime=2,this._maxParticleLifetime=5,this._gravity=[0,-1,0],this._maxNumParticlesSpawnPerSecond=80,this._particlePositionsCPU=new Float32Array,this._particleVelocitiesCPU=new Float32Array,this._particleLifetimesCPU=new Float32Array,this._device=t,this._useCPU=e,this._useCPU?this.initCPU():this.initGPU()}initCPU(){console.log("setting up cpu particles"),this._particlePositionsCPU=new Float32Array(3*this._numParticles);for(let t=0;t<this._numParticles;t++)this._particlePositionsCPU.set(this._originPos,3*t);this.createCPUParticleBuffer(),this._particleVelocitiesCPU=new Float32Array(3*this._numParticles),this._particleLifetimesCPU=new Float32Array(this._numParticles);for(let t=0;t<this._numParticles;t++){let e=u.getRandomVec3(!0);i.vec3.scale(e,e,this._initialVelocity),this._particleVelocitiesCPU.set(e,3*t),this._particleLifetimesCPU.set([0],t)}new Float32Array(this._particleBuffer.getMappedRange()).set(this._particlePositionsCPU),this._particleBuffer.unmap()}createCPUParticleBuffer(t=!1){this._particleBuffer=this._device.createBuffer({size:this._numParticles*u.INSTANCE_SIZE,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.STORAGE,mappedAtCreation:!0}),t&&(new Float32Array(this._particleBuffer.getMappedRange()).set(this._particlePositionsCPU),this._particleBuffer.unmap())}createGPUParticleBuffer(){this._particleBuffer=this._device.createBuffer({size:this._numParticles*u.INSTANCE_SIZE,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST})}initGPU(){console.log("setting up gpu particles"),this.createGPUParticleBuffer(),this._simulationUniformBuffer=new s.SimulationUniformBuffer(this._device);const t={layout:"auto",compute:{module:this._device.createShaderModule({code:o.default}),entryPoint:"simulate"}};this._simulationPipeline=this._device.createComputePipeline(t),this.createSimulationBindGroup()}createSimulationBindGroup(){var t;if(!this._simulationPipeline||!this._simulationUniformBuffer)throw new Error("simulation pipeline or uniform buffer not defined");const e={layout:this._simulationPipeline.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:this._particleBuffer,offset:0,size:null===(t=this._particleBuffer)||void 0===t?void 0:t.size}},{binding:1,resource:{buffer:this._simulationUniformBuffer.uniformBuffer,offset:0,size:this._simulationUniformBuffer.bufferSize}}]};this._simulationBindGroup=this._device.createBindGroup(e)}update(t){this._useCPU?this.updateCPU(t):this.updateGPU(t)}updateGPU(t){var e,n,r,i,a,o,s;if(!this._simulationPipeline)throw new Error("Simulation pipeline not defined");if(!this._simulationBindGroup)throw new Error("Simulation bind group not defined");null===(e=this._simulationUniformBuffer)||void 0===e||e.setDeltaTime(t),null===(n=this._simulationUniformBuffer)||void 0===n||n.setMinLifetime(this._minParticleLifetime),null===(r=this._simulationUniformBuffer)||void 0===r||r.setMaxLifetime(this._maxParticleLifetime),null===(i=this._simulationUniformBuffer)||void 0===i||i.setGravity(this._gravity),null===(a=this._simulationUniformBuffer)||void 0===a||a.setOrigin(this._originPos),null===(o=this._simulationUniformBuffer)||void 0===o||o.setInitialVelocity(this._initialVelocity);const u=2*(Math.random()-.5);null===(s=this._simulationUniformBuffer)||void 0===s||s.setRandSeed(u);const l=this._device.createCommandEncoder(),c=l.beginComputePass();c.setPipeline(this._simulationPipeline),c.setBindGroup(0,this._simulationBindGroup),c.dispatchWorkgroups(Math.ceil(this._numParticles/256)),c.end(),this._device.queue.submit([l.finish()])}updateData(t){if(t.guiData.useCPU!=this._useCPU&&(this._useCPU=t.guiData.useCPU,this._useCPU?this.initCPU():this.initGPU()),this._minParticleLifetime=t.guiData.minParticleLifetime,this._maxParticleLifetime=t.guiData.maxParticleLifetime,this._useCPU)if(t.guiData.numberOfParticles>this._numParticles){let e=new Float32Array(3*t.guiData.numberOfParticles),n=new Float32Array(3*t.guiData.numberOfParticles),r=new Float32Array(t.guiData.numberOfParticles);e.set(this._particlePositionsCPU,0),n.set(this._particleVelocitiesCPU,0),r.set(this._particleLifetimesCPU,0),this._numParticles=t.guiData.numberOfParticles,this._particlePositionsCPU=e,this._particleVelocitiesCPU=n,this._particleLifetimesCPU=r,console.log("Particle limit increased to "+this._numParticles)}else t.guiData.numberOfParticles<this._numParticles&&(this._numParticles=t.guiData.numberOfParticles,this._particlePositionsCPU=this._particlePositionsCPU.slice(0,3*this._numParticles),this._particleVelocitiesCPU=this._particleVelocitiesCPU.slice(0,3*this._numParticles),this._particleLifetimesCPU=this._particleLifetimesCPU.slice(0,this._numParticles),console.log("Particle limit decreased to "+this._numParticles));else if(t.guiData.numberOfParticles!=this._numParticles){let e=this._particleBuffer;const n=this._numParticles;if(this._numParticles=t.guiData.numberOfParticles,this.createGPUParticleBuffer(),!e||!this._particleBuffer)throw new Error("Particle Buffer now defined");{const t=this._device.createCommandEncoder();t.copyBufferToBuffer(e,0,this._particleBuffer,0,Math.min(this._numParticles,n)),this._device.queue.submit([t.finish()])}null==e||e.destroy(),this.createSimulationBindGroup()}}updateCPU(t){var e;const n=Math.max(this._maxNumParticlesSpawnPerSecond*t,0==this._maxNumParticlesSpawnPerSecond?0:1);for(let e=0;e<this._numParticles;e++){let r=i.vec3.fromValues(this._particlePositionsCPU[3*e],this._particlePositionsCPU[3*e+1],this._particlePositionsCPU[3*e+2]),o=i.vec3.fromValues(this._particleVelocitiesCPU[3*e],this._particleVelocitiesCPU[3*e+1],this._particleVelocitiesCPU[3*e+2]),s=this._particleLifetimesCPU[e];if(s<=0){if(0>=n)continue;r=this._originPos,o=u.getRandomVec3(!0),i.vec3.scale(o,o,this._initialVelocity),s=this._minParticleLifetime+Math.random()*(this._maxParticleLifetime-this._minParticleLifetime),this._particlePositionsCPU.set(r,3*e),this._particleVelocitiesCPU.set(o,3*e),this._particleLifetimesCPU.set([s],e)}else o=i.vec3.add(o,o,(0,a.multiplyVec3WithNumber)(this.gravity,t)),i.vec3.add(r,r,(0,a.multiplyVec3WithNumber)(o,t)),s-=t,this._particlePositionsCPU.set(r,3*e),this._particleVelocitiesCPU.set(o,3*e),this._particleLifetimesCPU.set([s],e)}null===(e=this._particleBuffer)||void 0===e||e.destroy(),this.createCPUParticleBuffer(!0)}static getRandomVec3(t=!1){let e=i.vec3.create();return e[0]=2*(Math.random()-.5),e[1]=2*(Math.random()-.5),e[2]=2*(Math.random()-.5),t&&i.vec3.normalize(e,e),e}get numParticles(){return this._numParticles}get originPos(){return this._originPos}get particleBuffer(){return this._particleBuffer}get initialVelocity(){return this._initialVelocity}set initialVelocity(t){this._initialVelocity=t}get gravity(){return this._gravity}set gravity(t){this._gravity=t}get maxNumParticlesSpawnPerSecond(){return this._maxNumParticlesSpawnPerSecond}set maxNumParticlesSpawnPerSecond(t){this._maxNumParticlesSpawnPerSecond=t}}e.Particles=u,u.INSTANCE_SIZE=32},419:function(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Renderer=void 0;const a=n(949),o=i(n(912)),s=i(n(147)),u=n(356),l=n(766),c=n(887),f=n(913),h=n(517),d=n(593),m=n(620),p=n(365);e.Renderer=class{constructor(){this.lastTime=0,this.deltaTime=0,this.useVertexPulling=!0,this.format="bgra8unorm",this.previousNumParticles=0,this.canvasWidth=0,this.canvasHeight=0,this.initCheck=()=>r(this,void 0,void 0,(function*(){const t=(0,a.CheckWebGPU)();if(t.includes("Your current browser does not support WebGPU!"))throw console.log(t),window.alert(t),"Your current browser does not support WebGPU!"})),this.initRenderer=(t=!1)=>r(this,void 0,void 0,(function*(){var t;const e=document.getElementById("canvas-webgpu");this.canvasWidth=e.width,this.canvasHeight=e.height;const n=yield null===(t=navigator.gpu)||void 0===t?void 0:t.requestAdapter();this.device=yield null==n?void 0:n.requestDevice(),this.context=e.getContext("webgpu"),this.format="bgra8unorm",this.context.configure({device:this.device,format:this.format,alphaMode:"opaque"}),yield this.initParticleRenderingPipeline()}))}calculateDeltaTime(){var t;if(!this.lastTime)return this.lastTime=performance.now(),this.deltaTime=0,void(this.fpsCounter=new p.FpsCounter);const e=performance.now();this.deltaTime=(e-this.lastTime)/1e3,this.lastTime=e,null===(t=this.fpsCounter)||void 0===t||t.update()}initParticleRenderingPipeline(t=!1){return r(this,void 0,void 0,(function*(){if(this.particleRenderPipelineInstancing=this.device.createRenderPipeline({layout:"auto",vertex:{module:this.device.createShaderModule({code:s.default}),entryPoint:"main_instancing",buffers:[{arrayStride:f.Particles.INSTANCE_SIZE,stepMode:"instance",attributes:[{shaderLocation:0,offset:0,format:"float32x3"},{shaderLocation:1,offset:12,format:"float32"}]}]},fragment:{module:this.device.createShaderModule({code:o.default}),entryPoint:"main",targets:[{format:this.format}]},primitive:{topology:"triangle-list"}}),this.particleRenderPipelineVertexPulling=this.device.createRenderPipeline({layout:"auto",vertex:{module:this.device.createShaderModule({code:s.default}),entryPoint:"main_vertex_pulling"},fragment:{module:this.device.createShaderModule({code:o.default}),entryPoint:"main",targets:[{format:this.format}]},primitive:{topology:"triangle-list"}}),!this.particleRenderPipelineVertexPulling)throw new Error("Vertex Pulling Pipeline creation failed.");this.vertexUniformBuffer=new l.VertexUniformBuffer(this.device,this.canvasHeight,this.canvasWidth,10,10),this.fragmentUniformBuffer=new h.FragmentUniformBuffer(this.device,c.vec3.fromValues(0,1,0),c.vec3.fromValues(1,0,0),5),this.camera=new m.OrbitCamera([0,0,-1],[0,0,0],[0,1,0],90,this.canvasWidth/this.canvasHeight),this.cameraUniformBuffer=this.device.createBuffer({size:64,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.writeCameraBuffer(),this.particleSystem=new f.Particles(this.device,t);const e=yield(0,u.loadTexture)(this.device,"1x1-white.png");this.uniformBindGroup=this.device.createBindGroup({layout:this.particleRenderPipelineInstancing.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:this.vertexUniformBuffer.uniformBuffer,offset:0,size:this.vertexUniformBuffer.bufferSize}},{binding:2,resource:e.sampler},{binding:3,resource:e.texture.createView()},{binding:1,resource:{buffer:this.cameraUniformBuffer,offset:0,size:64}},{binding:4,resource:{buffer:this.fragmentUniformBuffer.uniformBuffer,offset:0,size:this.fragmentUniformBuffer.bufferSize}}]}),this.uniformBindGroupVP=this.device.createBindGroup({layout:this.particleRenderPipelineVertexPulling.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:this.vertexUniformBuffer.uniformBuffer,offset:0,size:this.vertexUniformBuffer.bufferSize}},{binding:2,resource:e.sampler},{binding:3,resource:e.texture.createView()},{binding:1,resource:{buffer:this.cameraUniformBuffer,offset:0,size:64}},{binding:4,resource:{buffer:this.fragmentUniformBuffer.uniformBuffer,offset:0,size:this.fragmentUniformBuffer.bufferSize}}]}),this.createParticleBufferBindGroup()}))}createParticleBufferBindGroup(){var t;if(!this.particleRenderPipelineVertexPulling||!this.particleSystem)throw new Error("error creating particle buffer");this.particleBufferBindGroup=this.device.createBindGroup({layout:this.particleRenderPipelineVertexPulling.getBindGroupLayout(1),entries:[{binding:0,resource:{buffer:this.particleSystem.particleBuffer,offset:0,size:null===(t=this.particleSystem.particleBuffer)||void 0===t?void 0:t.size}}]})}renderParticles(){var t,e,n;null===(t=this.particleSystem)||void 0===t||t.update(this.deltaTime),this.writeCameraBuffer();const r=this.device.createCommandEncoder(),i=this.context.getCurrentTexture().createView(),a=r.beginRenderPass({colorAttachments:[{view:i,clearValue:{r:.1,g:.17,b:.25,a:1},loadOp:"clear",storeOp:"store"}]});if(!this.particleSystem)throw new Error("particle system not setup");this.useVertexPulling?(a.setPipeline(this.particleRenderPipelineVertexPulling),a.setBindGroup(0,this.uniformBindGroupVP),this.previousNumParticles!=this.particleSystem.numParticles&&(this.createParticleBufferBindGroup(),this.previousNumParticles=this.particleSystem.numParticles),a.setBindGroup(1,this.particleBufferBindGroup),a.draw(6*(null===(n=this.particleSystem)||void 0===n?void 0:n.numParticles),1,0,0),a.end()):(a.setPipeline(this.particleRenderPipelineInstancing),a.setBindGroup(0,this.uniformBindGroup),a.setVertexBuffer(0,this.particleSystem.particleBuffer),a.draw(6,null===(e=this.particleSystem)||void 0===e?void 0:e.numParticles,0,0),a.end()),this.device.queue.submit([r.finish()])}frame(){this.calculateDeltaTime(),this.renderParticles()}updateData(t){var e,n,r,i,a;if(null===(e=this.particleSystem)||void 0===e||e.updateData(t),!this.fragmentUniformBuffer)throw new Error("Fragment uniform Buffer not defined!");const o=t.guiData,s=(0,d.vec3ToColor)((0,d.vec3FromArray)(o.particleColor));null===(n=this.fragmentUniformBuffer)||void 0===n||n.setColor(c.vec3.fromValues(s[0],s[1],s[2]));const u=(0,d.vec3ToColor)((0,d.vec3FromArray)(o.particleColor2));null===(r=this.fragmentUniformBuffer)||void 0===r||r.setColor2(c.vec3.fromValues(u[0],u[1],u[2])),null===(i=this.vertexUniformBuffer)||void 0===i||i.setHeight(o.particleHeight),null===(a=this.vertexUniformBuffer)||void 0===a||a.setWidth(o.particleWidth),this.useVertexPulling=o.vertexPulling}writeCameraBuffer(){if(!this.camera)throw new Error("renderer.camera not defined!");const t=new Float32Array([...this.camera.getViewProjectionMatrix()]);this.device.queue.writeBuffer(this.cameraUniformBuffer,0,t.buffer)}}},86:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SimulationUniformBuffer=void 0,e.SimulationUniformBuffer=class{constructor(t){this._bufferSize=44,this.DELTATIME_OFFSET=0,this.GRAVITY_OFFSET=16,this.ORIGIN_OFFSET=32,this.MIN_LIFETIME_OFFSET=this.ORIGIN_OFFSET+12,this.MAX_LIFETIME_OFFSET=this.MIN_LIFETIME_OFFSET+4,this.INITIAL_VELOCITY_OFFSET=this.MAX_LIFETIME_OFFSET+4,this.RAND_SEED_OFFSET=this.INITIAL_VELOCITY_OFFSET+4,this._device=t,this._bufferSize+=16,this._uniformBuffer=t.createBuffer({size:this._bufferSize,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST})}get uniformBuffer(){return this._uniformBuffer}get bufferSize(){return this._bufferSize}setDeltaTime(t){this._device.queue.writeBuffer(this._uniformBuffer,this.DELTATIME_OFFSET,Float32Array.of(t))}setGravity(t){this._device.queue.writeBuffer(this._uniformBuffer,this.GRAVITY_OFFSET,Float32Array.from(t))}setOrigin(t){this._device.queue.writeBuffer(this._uniformBuffer,this.ORIGIN_OFFSET,Float32Array.from(t))}setMinLifetime(t){this._device.queue.writeBuffer(this._uniformBuffer,this.MIN_LIFETIME_OFFSET,Float32Array.of(t))}setMaxLifetime(t){this._device.queue.writeBuffer(this._uniformBuffer,this.MAX_LIFETIME_OFFSET,Float32Array.of(t))}setInitialVelocity(t){this._device.queue.writeBuffer(this._uniformBuffer,this.INITIAL_VELOCITY_OFFSET,Float32Array.of(t))}setRandSeed(t){this._device.queue.writeBuffer(this._uniformBuffer,this.RAND_SEED_OFFSET,Float32Array.of(t))}}},356:function(t,e){var n=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}u((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.loadTexture=e.Texture=void 0;class r{constructor(t,e){this.texture=t,this.sampler=e}}e.Texture=r,e.loadTexture=(t,e)=>n(void 0,void 0,void 0,(function*(){const n=document.createElement("img");n.src="../assets/"+e,yield n.decode();const i=yield createImageBitmap(n),a=t.createTexture({size:[i.width,i.height,1],format:"rgba8unorm",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT});t.queue.copyExternalImageToTexture({source:i},{texture:a},[i.width,i.height]);const o=t.createSampler({minFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"});return new r(a,o)}))},593:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.multiplyVec3WithNumber=e.vec3ToColor=e.vec3FromArray=void 0;const r=n(887);function i(t,e){return r.vec3.fromValues(t[0]*e,t[1]*e,t[2]*e)}e.vec3FromArray=function(t){return r.vec3.fromValues(t[0],t[1],t[2])},e.vec3ToColor=function(t){return i(t,1/255)},e.multiplyVec3WithNumber=i},766:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VertexUniformBuffer=void 0,e.VertexUniformBuffer=class{constructor(t,e,n,r=5,i=5){if(this._bufferSize=8,this.HALFWIDTH_OFFSET=0,this.HALFHEIGHT_OFFSET=this.HALFWIDTH_OFFSET+4,e<=0||n<=0)throw new Error("Invalid canvas dimensions");this._canvasHeight=e,this._canvasWidth=n,this._device=t,this._uniformBuffer=t.createBuffer({size:this._bufferSize,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.setHeight(r),this.setWidth(i)}get uniformBuffer(){return this._uniformBuffer}get bufferSize(){return this._bufferSize}setHeight(t){let e=.5*t/this._canvasHeight;this._device.queue.writeBuffer(this._uniformBuffer,this.HALFHEIGHT_OFFSET,Float32Array.of(e))}setWidth(t){let e=.5*t/this._canvasWidth;this._device.queue.writeBuffer(this._uniformBuffer,this.HALFWIDTH_OFFSET,Float32Array.of(e))}get canvasHeight(){return this._canvasHeight}set canvasHeight(t){this._canvasHeight=t}get canvasWidth(){return this._canvasWidth}set canvasWidth(t){this._canvasWidth=t}}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var a=e[r]={id:r,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{n(579);const t=n(419);let e=new(n(906).ParticleGUI),r=new t.Renderer;function i(){r.updateData(e),r.frame(),requestAnimationFrame(i)}function a(){r.initCheck().then((()=>r.initRenderer(e.guiData.useCPU).then((()=>requestAnimationFrame(i)))))}a(),window.addEventListener("resize",(function(){console.log("resizing window"),a()}))})()})();
//# sourceMappingURL=main.bundle.js.map